"use strict";window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.AccelDecelSegment=function(){var e,t,i,o,a,n,s,r,l,c,d,m,p,f,u,v,h,T,x,b,y,g,C={},w=function(){t=2/m-1,e=(1-t)*(1-p)/2,i=1-e-t,o=m*e/2,a=m*t,n=m*i/2,s=o/3*e,r=(a+2*o)/2*t,l=(1-n/3)*i,c=s+r+l,s/=c,r/=c,l/=c,d=.5/c},M=function(e){switch(e.permutation){case"TIME_DISTANCE":f=e.time,u=e.distance/f,v=y+2*(u-y)*d,h=v-y,T=f*y,x=e.distance-T;break;case"TIME_VELOCITY":f=e.time,h=e.velocity-y,x=f*h*c,T=f*y}},D=function(){if(e>0){var t=f*e,i=T*e+x*s,a=h*o,n=b,r=n+t,l=g,c=l+i,d=y,m=d+a,p=(m+d)/2,u=(i-p*t)*(-2/Math.pow(t,3)),v=(-3*u*Math.pow(t,2)+a)/(2*t),w=d,M=l,D=0,O=6*u*(r-n)+2*v,U=Math.abs(O),I=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),A=6*u,k={time_initial:n,time_final:r,velocity_initial:d,velocity_final:m,acceleration_initial:D,acceleration_final:O,position_initial:l,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:w,motion_equation_zero_order_coefficient:M,rms_acceleration:U,rms_velocity:I,jerk:A};C.ElementsData.push(k),b=r,g=c,y=m}},O=function(){if(t>0){var e=f*t,i=T*t+x*r,o=h*a,n=b,s=n+e,l=g,c=l+i,d=y,m=d+o,p=0,u=(-3*p*Math.pow(e,2)+o)/(2*e),v=d,w=l,M=2*u,D=6*p*(s-n)+2*u,O=Math.abs(D),U=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),I=6*p,A={time_initial:n,time_final:s,velocity_initial:d,velocity_final:m,acceleration_initial:M,acceleration_final:D,position_initial:l,position_final:c,motion_equation_third_order_coefficient:p,motion_equation_second_order_coefficient:u,motion_equation_first_order_coefficient:v,motion_equation_zero_order_coefficient:w,rms_acceleration:O,rms_velocity:U,jerk:I};C.ElementsData.push(A),b=s,g=c,y=m}},U=function(){if(i>0){var e=f*i,t=T*i+x*l,o=h*n,a=b,s=a+e,r=g,c=r+t,d=y,m=d+o,p=(m+d)/2,u=(t-p*e)*(-2/Math.pow(e,3)),v=(-3*u*Math.pow(e,2)+o)/(2*e),w=d,M=r,D=2*v,O=0,U=Math.abs(O),I=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),A=6*u,k={time_initial:a,time_final:s,velocity_initial:d,velocity_final:m,acceleration_initial:D,acceleration_final:O,position_initial:r,position_final:c,motion_equation_third_order_coefficient:u,motion_equation_second_order_coefficient:v,motion_equation_first_order_coefficient:w,motion_equation_zero_order_coefficient:M,rms_acceleration:U,rms_velocity:I,jerk:A};C.ElementsData.push(k),b=s,g=c,y=m}},I=function(){D(),O(),U()},A=function(){var e=C.ElementsData,t=e.length,i=e[t-1].position_final-e[0].position_initial;C.SegmentData.distance=i},k=function(e,t){return C={},C.ElementsData=[],C.SegmentData={},p=e.skewPercentage/100||0,m=1/(1-e.jerkPercentage/200)||1,b=t.time||0,y=t.velocity||0,g=t.position||0,w(),M(e),I(),A(),C};return{calculate:k}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.CruiseSegment=function(){var e,t,i,o,a,n={},s=function(e){switch(e.permutation){case"TIME":o=e.time,a=o*t}},r=function(){var s=e,r=s+o,l=i,c=l+a,d=t,m=d,p=0,f=0,u=d,v=l,h=0,T=0,x=Math.abs(T),b=Math.sqrt((Math.pow(d,2)+Math.pow(m,2))/2),y={time_initial:s,time_final:r,velocity_initial:d,velocity_final:m,acceleration_initial:h,acceleration_final:T,position_initial:l,position_final:c,motion_equation_third_order_coefficient:p,motion_equation_second_order_coefficient:f,motion_equation_first_order_coefficient:u,motion_equation_zero_order_coefficient:v,rms_acceleration:x,rms_velocity:b};n.ElementsData.push(y)},l=function(){var e=n.ElementsData,t=e[0].position_final-e[0].position_initial;n.SegmentData.distance=t},c=function(o,a){return n={},n.ElementsData=[],n.SegmentData={},e=a.time||0,t=a.velocity||0,i=a.position||0,s(o),r(),l(),n};return{calculate:c}}(),window.COSMATT=window.COSMATT||{},COSMATT.ProfileCalculation=COSMATT.ProfileCalculation||{},COSMATT.ProfileCalculation.ProfileIndexModel=function(){var e,t,i,o,a,n,s,r,l,c,d,m,p,f,u,v,h,T,x=[],b={},y=0,g=0,C=function(e){if(e=parseInt(e),!isNaN(e))switch(e){case 0:y=0,g=0;break;case 1:y=40,g=40;break;case 2:y=100,g=100}},w=function(e){var t,i;t=void 0!=e.velocityJerk?100*(e.velocityJerk-1):50,i=void 0!=e.velocitySkew?e.velocitySkew:0,s=t/100+1,r=i/100},M=function(){if(u=v=h=T=0,c=(a-t*n)/n,d=c*s,0==d)console.log("cruise velocity zero");else{var C=2*(d*n-(a-t*n))/d;if(m=C*(1+r)/2,p=C*(1-r)/2,f=n-C,m>0){var w={},M={};w.permutation="TIME_VELOCITY",w.velocity=d+t,w.time=m,w.jerkPercentage=y,w.skewPercentage=0,M.position=i,M.velocity=t,M.time=e;var D=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(w,M);u=D.SegmentData.distance,x=x.concat(D.ElementsData),b.accel=D.ElementsData}if(f>0){var O={},U={};O.permutation="TIME",O.velocity=d+t,O.time=f,O.skewPercentage=0,U.position=i+u,U.velocity=t+d,U.time=e+m;var I=COSMATT.ProfileCalculation.CruiseSegment.calculate(O,U);h=I.SegmentData.distance,x=x.concat(I.ElementsData),b.cruise=I.ElementsData}if(p>0){var A={},k={};A.permutation="TIME_VELOCITY",A.velocity=o,A.time=p,A.jerkPercentage=g,A.skewPercentage=0,k.position=i+u+h,k.velocity=d+t,k.time=e+m+f;var S=COSMATT.ProfileCalculation.AccelDecelSegment.calculate(A,k);v=S.SegmentData.distance,x=x.concat(S.ElementsData),b.decel=S.ElementsData}if(l>0){var V={},N={};V.permutation="TIME",V.velocity=o,V.time=l,V.skewPercentage=0,N.position=i+a,N.velocity=o,N.time=e+n;var _=COSMATT.ProfileCalculation.CruiseSegment.calculate(V,N);T=_.SegmentData.distance,x=x.concat(_.ElementsData),b.dwell=_.ElementsData}}},D=function(s,r){if(x=[],b=[],a=s.movedistance||0,n=s.movedtime||0,l=s.dweltime||0,w(s),C(s.smoothness),e=r.time||0,t=r.velocity||0,i=r.position||0,o=t,!(a>0&&n>0))throw{message:"Time and distance needs to be positive values for Profile calculations"};return M(),{elementsData:x,segmentData:b}};return{calculate:D}}(),window.COSMATT=window.COSMATT||{},COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.ENUMS={DataFields:{moveDistance:"moveDistance",moveTime:"moveTime",dwellTime:"dwellTime",velocityFormFactor:"indexType",peakVelocity:"peakVelocity",rmsVelocity:"rmsVelocity",peakAccelaration:"peakAcc",rmsAccelaration:"rmsAcc",showAll:!0},Profiles:{profile1:"profile1",profile2:"profile2",profile3:"profile3",showAll:!0},GraphMode:{individualAxis:0,sameAxis:1},Graphs:{position:"pos",velocity:"vel",acceleration:"acc",jerk:"jerk",showAll:!0},GraphHandles:{position:"position",peakVelocity:"peakVelocity",moveTime:"moveTime",dwellTime:"dwellTime",showAll:!0},Smoothness:{automatic:0,standard:1,maximum:2},LinearOrRotary:{Rotary:"ROTARY",Linear:"LINEAR"}},function(e){e.fn.motionProfile=function(t){function i(e){if(e.movedistance){w.movedistance=isNaN(parseFloat(e.movedistance.value))?"":parseFloat(e.movedistance.value);var t=O.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");t.setTextBoxValue(w.movedistance),e.movedistance.unit&&(c.moveDistanceUnit=e.movedistance.unit,t.setDropBoxItem(c.moveDistanceUnit))}if(e.movedtime){w.movedtime=isNaN(parseFloat(e.movedtime.value))?"":parseFloat(e.movedtime.value);var t=O.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox");t.setTextBoxValue(w.movedtime),e.movedtime.unit&&(c.moveTimeUnit=e.movedtime.unit,t.setDropBoxItem(c.moveTimeUnit))}if(e.dweltime){w.dweltime=isNaN(parseFloat(e.dweltime.value))?"":parseFloat(e.dweltime.value);var t=O.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox");t.setTextBoxValue(w.dweltime),e.dweltime.unit&&(c.dwellTimeUnit=e.dweltime.unit,t.setDropBoxItem(c.dwellTimeUnit))}if(e.velocityJerk){w.velocityJerk=isNaN(parseFloat(e.velocityJerk.value))?"":parseFloat(e.velocityJerk.value);var t=O.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");t.setTextBoxValue(w.velocityJerk)}be()}function o(t){var i;if(t.movedistance){i=t.movedistance.status?"correct":"incorrect";var o=O.find("#moveDistanceInputContainer").find(".comboMoveDistance");o.addClass(i),o.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}});var n=COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol;i=t.movedistance.status?"fa-check correct":"fa-times incorrect";var s=COSMATT.UNITCONVERTER.getUnitConvertedValue(c.UnitData.Position,t.movedistance.correctAnswer,COSMATT.UNITCONVERTER.getSIUnit(c.UnitData.Position).id,c.moveDistanceDefaultUnit),r=t.movedistance.status?"":"("+Math.round(s)+" "+n+")";o.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+r+"</span></span>")}if(t.movedtime){i=t.movedtime.status?"correct":"incorrect";var l=O.find("#moveTimeInputContainer").find(".comboMoveTime");l.addClass(i),l.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),i=t.movedtime.status?"fa-check correct":"fa-times incorrect";var r=t.movedtime.status?"":"("+t.movedtime.correctAnswer+" sec)";l.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+r+"</span></span>")}if(t.dweltime){i=t.dweltime.status?"correct":"incorrect";var d=O.find("#dwellTimeInputContainer").find(".comboDwellTime");d.addClass(i),d.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),i=t.dweltime.status?"fa-check correct":"fa-times incorrect";var r=t.dweltime.status?"":"("+t.dweltime.correctAnswer+" sec)";d.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+r+"</span></span>")}if(t.velocityJerk){i=t.velocityJerk.status?"correct":"incorrect";var m=O.find("#indexTypeInputContainer").find(".comboIndexType");m.addClass(i),m.data("unitsComboBox").update({enable:{textbox:"false",comboBox:"false"}}),i=t.velocityJerk.status?"fa-check correct":"fa-times incorrect";var r=t.velocityJerk.status?"":"("+t.velocityJerk.correctAnswer+")";m.find(".cosmatt-unitComboBox").append('<span class="response-status"><span class="fa '+i+'"></span><span class="correct-answer">'+r+"</span></span>")}u.find(".response-status").unbind("mouseenter").bind("mouseenter",function(t){var i=e(this)[0],o=u.offset();i.offsetWidth<i.scrollWidth&&$(t.pageX-o.left,t.pageY-o.top,i.innerText)}),u.find(".response-status").unbind("mouseleave").bind("mouseleave",function(e){u.find("#tooltip").remove()}),a()}function a(){if(x){var e=x.getData();e[1]&&(e[1].hoverable=!1),x.setupGrid(),x.setData(e),x.draw()}if(b){var t=b.getData();t[1]&&(t[1].hoverable=!1),t[2]&&(t[2].hoverable=!1),t[3]&&(t[3].hoverable=!1),b.setupGrid(),b.setData(t),b.draw()}oe()}function n(){return{activeProfileIndex:c.activeProfileIndex,moveDistance:w.movedistance,moveTime:w.movedtime,dwellTime:w.dweltime,smoothness:w.smoothness}}var s=COSMATT.MotionProfile.getDefaults(),r=COSMATT.MotionProfile.getlinearDefaults(),l=COSMATT.MotionProfile.getRotaryDefaults();s=t.linearOrRotary&&t.linearOrRotary==COSMATT.MotionProfile.ENUMS.LinearOrRotary.Linear?e.extend(s,r):e.extend(s,l),t.assessmentMode&&(s.moveDistance="",s.moveTime="",s.dwellTime="",s.activeProfileIndex=3);var c=e.extend(s,t),d=!0,m=new Cosmatt.NumberFormatter(c.numberFormatterOptions),p=function(e,t){return""===e.toString().trim()?e:m.format(e)};c.graphModeVal=c.graphMode;var f=this,u=e('<div class="cosmatt-motionProfile unselectable" unselectable="on"></div>');f.append(u),u.append('<div id="profileButtons"><button class="btn btn-default profileButton" id="btn1">Profile 1</button><button class="btn btn-default profileButton" id="btn2">Profile 2</button><button class="btn btn-default profileButton" id="btn3">Profile 3</button></div><div id="graphContainer" class=""></div><div id="inputControls"></div>'),t.assessmentMode&&u.addClass("assessment-mode");var v,h,T,x,b,y,g,C,w={},M={},D={},O=u.find("#inputControls"),U=0,I=0,A=void 0!==c.xmin?parseFloat(c.xmin):15,k=void 0!==c.posYmin?parseFloat(c.posYmin):30,S=void 0!==c.velYmin?parseFloat(c.velYmin):8,V=void 0!==c.accYmin?parseFloat(c.accYmin):2,N=void 0!==c.jerkYmin?parseFloat(c.jerkYmin):3,_={vel:{graphtype:"Velocity",label:"Velocity",data:[],color:"#f7252a",lines:{show:!0},hoverable:!1,clickable:!1},pos:{graphtype:"Position",label:"Position",data:[],color:"#619beb",series:{lines:{show:!1}},hoverable:!1,clickable:!1},acc:{graphtype:"Acceleration",label:"Acceleration",data:[],color:"#ff8a65",series:{lines:{show:!1}},hoverable:!1,clickable:!1},jerk:{graphtype:"Jerk",label:"Jerk",data:[],color:"#40cc43",series:{lines:{show:!1}},hoverable:!1,clickable:!1}},P={vel:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},pos:{graphtype:"Position",data:[],color:"#619beb",lines:{show:!1},points:{show:!0,fillColor:"#619beb"}},acc:{label:"Acceleration",data:[],color:"#ff8a65"},jerk:{label:"Jerk",data:[],color:"#40cc43"},dwell:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}},movetime:{graphtype:"Velocity",data:[],color:"#ef7c7f",lines:{show:!1},points:{show:!0,fillColor:"#ef7c7f"}}},E={series:{lines:{show:!0}},xaxis:{axisLabel:"Time (sec)",position:"bottom",tickFormatter:p},legend:{show:!0},grid:{hoverable:!0,clickable:!0,borderWidth:{top:0,bottom:1,right:0,left:1}}},F=function(){for(var e in _)_.hasOwnProperty(e)&&(_[e].data=[]);for(var e in P)P.hasOwnProperty(e)&&(P[e].data=[])},R=function(e,t,i){var o=Object.keys(e),a=0;for(var n in o)if(o.hasOwnProperty(n)){var s=1.2*e[o[n]][0][t];s>a&&(a=s)}return i>a&&(a=i),a},B=function(){var e=[];return c.showGraphs.length>0&&(c.showGraphs.indexOf(COSMATT.MotionProfile.ENUMS.Graphs.position)>-1?e.push(_.pos,P.pos):e.push([],[]),c.showGraphs.indexOf(COSMATT.MotionProfile.ENUMS.Graphs.velocity)>-1?e.push(_.vel,P.vel,P.dwell,P.movetime):e.push([],[],[],[]),c.showGraphs.indexOf(COSMATT.MotionProfile.ENUMS.Graphs.acceleration)>-1?e.push(_.acc):e.push([]),c.showGraphs.indexOf(COSMATT.MotionProfile.ENUMS.Graphs.jerk)>-1?e.push(_.jerk):e.push([])),e},G=function(e){var t=(Object.keys(e),R(e,"time_final",A));if(x){var i=R(e,"position_final",k),o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Position,"SI",c.graphUnits.Position);o&&1!=o&&(i*=o),x.getOptions().yaxes[0].max=i,x.getOptions().yaxes[0].min=-1*i,x.getOptions().xaxes[0].max=t,x.setupGrid(),x.setData([_.pos,P.pos]),x.draw()}if(b){var a=R(e,"velocity_final",S),o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Velocity,"SI",c.graphUnits.Velocity);o&&1!=o&&(a*=o),b.getOptions().yaxes[0].max=a,b.getOptions().yaxes[0].min=-1*a,b.getOptions().xaxes[0].max=t,b.setupGrid(),b.setData([_.vel,P.vel,P.dwell,P.movetime]),b.draw()}if(y){var n=R(e,"acceleration_final",V),o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Acceleration,"SI",c.graphUnits.Acceleration);o&&1!=o&&(n*=o),y.getOptions().yaxes[0].max=n,y.getOptions().yaxes[0].min=-1*n,y.getOptions().xaxes[0].max=t,y.setupGrid(),y.setData([_.acc]),y.draw()}if(C){var s=R(e,"jerk",N),o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Jerk,"SI",c.graphUnits.Jerk);o&&1!=o&&(s*=o),C.getOptions().yaxes[0].max=s,C.getOptions().yaxes[0].min=-1*s,C.getOptions().xaxes[0].max=t,C.setupGrid(),C.setData([_.jerk]),C.draw()}if(g){for(var r,l=g.getOptions().yaxes,d=0;d<l.length;d++){switch(l[d].axisLabel){case"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol+")":r=R(e,"position_final",k);var o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Position,"SI",c.graphUnits.Position);o&&1!=o&&(r*=o);break;case"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Velocity,c.graphUnits.Velocity).symbol+")":r=R(e,"velocity_final",S);var o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Velocity,"SI",c.graphUnits.Velocity);o&&1!=o&&(r*=o);break;case"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Acceleration,c.graphUnits.Acceleration).symbol+")":r=R(e,"acceleration_final",V);var o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Acceleration,"SI",c.graphUnits.Acceleration);o&&1!=o&&(r*=o);break;case"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Jerk,c.graphUnits.Jerk).symbol+")":r=R(e,"jerk",N);var o=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Jerk,"SI",c.graphUnits.Jerk);o&&1!=o&&(r*=o)}g.getOptions().yaxes[d].max=r,g.getOptions().yaxes[d].min=-1*r}g.getOptions().xaxes[0].max=t,g.setupGrid(),g.setData(B()),g.draw()}},J=function(e){L(e)},L=function(t){var i,o=u.find("#graphContainer"),a=!0,n=function(){x&&(x=x.destroy()),b&&(b=b.destroy()),y&&(y=y.destroy()),C&&(C=C.destroy()),g&&(g=g.destroy()),o.find(".graphArea").remove(),t?(j(o,t),a=!1):(q(),a=!1)};o.resize(function(s){var r=e(s.target);"graphContainer"===r[0].id?r.width()<777&&c.showGraphs.length>1&&0===c.graphModeVal&&0===c.graphMode?(c.graphMode=1,n()):r.width()>777&&c.showGraphs.length>1&&0===c.graphModeVal&&1===c.graphMode?(c.graphMode=0,n()):a&&(a=!1,t?j(o,t):q()):r.hasClass("graphArea")&&r.height(r.width()),c.autoResizer&&!i&&(i=setTimeout(function(){c.autoResizer(),i=void 0},500))}),o.trigger("resize")},j=function(t,i){var o=R(i,"position_final",k),a=R(i,"velocity_final",S),n=R(i,"acceleration_final",V),s=R(i,"time_final",A),r=R(i,"jerk",N),l=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Position,"SI",c.graphUnits.Position);if(l&&1!=l&&(o*=l),l=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Velocity,"SI",c.graphUnits.Velocity),l&&1!=l&&(a*=l),l=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Acceleration,"SI",c.graphUnits.Acceleration),l&&1!=l&&(n*=l),l=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Jerk,"SI",c.graphUnits.Jerk),l&&1!=l&&(r*=l),0===t.children().length)if(0===c.graphMode)for(var d=0;d<c.showGraphs.length;d++)t.append('<div id="'+c.showGraphs[d]+'Graph" class="graphArea"></div>');else 1===c.graphMode&&t.append('<div id="aioGraph" class="graphArea"></div>');for(var m=t.find(".graphArea"),d=0;d<m.length;d++)0===d||d===m.length-1?e(m[d]).css("width","calc("+100/t.children().length+"% - 20px)"):e(m[d]).css("width","calc("+100/t.children().length+"% - 30px)");m.css("height",m.eq(0).width()),1===c.graphMode&&0===c.graphModeVal?m.css("max-height","300px"):0===c.graphMode&&0===c.graphModeVal&&m.css("max-height","400px");for(var f=t.find("#posGraph"),u=t.find("#velGraph"),v=t.find("#accGraph"),h=t.find("#jerkGraph"),T=t.find("#aioGraph"),w=Object.keys(_),M=Object.keys(P),d=0;d<w.length;d++)delete _[w[d]].yaxis;for(var d=0;d<M.length;d++)delete P[M[d]].yaxis;if(f.length>0){var D=e.extend(!0,{yaxis:{min:-1*o,max:o,position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol+")",tickFormatter:p},xaxis:{min:0,max:s,tickFormatter:p}},E);x=e.plot(f,[_.pos,P.pos],D),te(x)}if(u.length>0){var O=e.extend(!0,{yaxis:{min:-1*a,max:a,position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Velocity,c.graphUnits.Velocity).symbol+")",tickFormatter:p},xaxis:{min:0,max:s,tickFormatter:p}},E);b=e.plot(u,[_.vel,P.vel,P.dwell,P.movetime],O),ee(b)}if(v.length>0){var U=e.extend(!0,{yaxis:{min:-1*n,max:n,position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Acceleration,c.graphUnits.Acceleration).symbol+")",tickFormatter:p},xaxis:{min:0,max:s,tickFormatter:p}},E);y=e.plot(v,[_.acc],U)}if(h.length>0){var I=e.extend(!0,{yaxis:{min:-1*r,max:r,position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Jerk,c.graphUnits.Jerk).symbol+")",tickFormatter:p},xaxis:{min:0,max:s,tickFormatter:p}},E);C=e.plot(h,[_.jerk],I),te(x)}if(T.length>0){var F={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*o,max:o},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Velocity,c.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*a,max:a},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Acceleration,c.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*n,max:n},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Jerk,c.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3,min:-1*r,max:r}},G=e.extend(!0,{yaxes:function(){for(var e=[],t=0;t<c.showGraphs.length;t++)e[t]=F[c.showGraphs[t]],_[c.showGraphs[t]].yaxis=t+1,P[c.showGraphs[t]].yaxis=t+1;return e}(),xaxis:{min:0,max:s,tickFormatter:p}},E);G.legend={show:!0,backgroundOpacity:0},g=e.plot(T,B(),G),ie(g)}c.onGraphPaint&&c.onGraphPaint()},q=function(){var t=u.find("#graphContainer");if(0===t.children().length)if(0===c.graphMode)for(var i=0;i<c.showGraphs.length;i++)t.append('<div id="'+c.showGraphs[i]+'Graph" class="graphArea"></div>');else 1===c.graphMode&&t.append('<div id="aioGraph" class="graphArea"></div>');for(var o=t.find(".graphArea"),i=0;i<o.length;i++)0===i||i===o.length-1?e(o[i]).css("width","calc("+100/t.children().length+"% - 20px)"):e(o[i]).css("width","calc("+100/t.children().length+"% - 30px)");o.css("height",o.eq(0).width()),1===c.graphMode&&0===c.graphModeVal?o.css("max-height","300px"):0===c.graphMode&&0===c.graphModeVal&&o.css("max-height","400px");for(var a=Object.keys(_),n=Object.keys(P),i=0;i<a.length;i++)delete _[a[i]].yaxis;for(var i=0;i<n.length;i++)delete P[n[i]].yaxis;var s=t.find("#posGraph"),r=t.find("#velGraph"),l=t.find("#accGraph"),d=t.find("#jerkGraph"),m=t.find("#aioGraph");if(s.length>0&&(x=e.plot(s,[_.pos,P.pos],e.extend(!0,{yaxis:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol+")"},xaxis:{min:0,tickFormatter:p}},E))),r.length>0&&(b=e.plot(r,[_.vel,P.vel,P.dwell,P.movetime],e.extend(!0,{yaxis:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Velocity,c.graphUnits.Velocity).symbol+")"},xaxis:{min:0,tickFormatter:p}},E))),l.length>0&&(y=e.plot(l,[_.acc],e.extend(!0,{yaxis:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Acceleration,c.graphUnits.Acceleration).symbol+")"},xaxis:{min:0,tickFormatter:p}},E))),d.length>0&&(C=e.plot(d,[_.jerk],e.extend(!0,{yaxis:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Jerk,c.graphUnits.Jerk).symbol+")"},xaxis:{min:0,tickFormatter:p}},E))),m.length>0){var f={pos:{position:"left",axisLabel:"Position ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Position,c.graphUnits.Position).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},vel:{position:"left",axisLabel:"Velocity ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Velocity,c.graphUnits.Velocity).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},acc:{position:"left",axisLabel:"Acceleration ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Acceleration,c.graphUnits.Acceleration).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3},jerk:{position:"left",axisLabel:"Jerk ("+COSMATT.UNITCONVERTER.getUnitDetails(c.UnitData.Jerk,c.graphUnits.Jerk).symbol+")",axisLabelFontSizePixels:12,axisLabelFontFamily:"Verdana, Arial",axisLabelPadding:3}},v=e.extend(!0,{yaxes:function(){for(var e=[],t=0;t<c.showGraphs.length;t++)e[t]=f[c.showGraphs[t]],_[c.showGraphs[t]].yaxis=t+1,P[c.showGraphs[t]].yaxis=t+1;return e}(),xaxis:{min:0,tickFormatter:p}},E);v.legend={show:!0,backgroundOpacity:0},g=e.plot(m,B(),v)}c.onGraphPaint&&c.onGraphPaint()},z=function(e,t){for(var i=e.time_initial,o=e.time_final,a=e.motion_equation_third_order_coefficient,n=e.motion_equation_second_order_coefficient,s=e.motion_equation_first_order_coefficient,r=e.motion_equation_zero_order_coefficient,l=o-i,c=l/t,d=0;l>d;d+=c)_.jerk.data.push([d+i,6*a]),_.acc.data.push([d+i,6*a*d+2*n]),_.vel.data.push([d+i,3*a*Math.pow(d,2)+2*n*d+s]),_.pos.data.push([d+i,a*Math.pow(d,3)+n*Math.pow(d,2)+s*d+r])},Y=function(e){var t,i,o,a;if(e.cruise){var n=(e.cruise[0].time_final+e.cruise[0].time_initial)/2;t=[n,e.cruise[0].velocity_final]}else if(e.accel)for(var s=0,r=0;r<_.vel.data.length;r++)_.vel.data[r][1]>s&&(s=_.vel.data[r][1],t=_.vel.data[r]);e.dwell&&(i=[e.dwell[0].time_final,e.dwell[0].velocity_final]),e.decel?o=[e.decel[0].time_final,e.decel[0].velocity_final]:e.cruise&&(o=[e.cruise[0].time_final,e.cruise[0].velocity_final]);var l=parseFloat(w.movedtime+w.dweltime||0),d=parseFloat(w.movedistance);a=[l,d],c.showGraphDragHandles&&(c.showGraphDragHandles.indexOf("position")>-1&&a&&P.pos.data.push(a),c.showGraphDragHandles.indexOf("peakVelocity")>-1&&t&&P.vel.data.push(JSON.parse(JSON.stringify(t))),c.showGraphDragHandles.indexOf("moveTime")>-1&&o&&P.movetime.data.push(o),c.showGraphDragHandles.indexOf("dwellTime")>-1&&i&&P.dwell.data.push(i))},H=function(e){var t,i,o,a,n,s,r,l=e.dwell?e.dwell[0].time_final:0;n=s=r=0;var c,d,m,p;if(c=d=m=p=0,!e.cruise||e.accel||e.decel||(t=e.cruise[0].velocity_final,o=e.cruise[0].acceleration_final,t=parseFloat(t),o=parseFloat(o),i=t,a=o,d=e.cruise[0].rms_acceleration,s=e.cruise[0].time_final),!e.cruise&&e.accel&&e.decel&&(t=e.accel[0].velocity_final,o=e.accel[0].acceleration_final,t=parseFloat(t),o=parseFloat(o),i=t/Math.sqrt(3),a=Math.sqrt(Math.pow(e.accel[0].rms_acceleration,2)+Math.pow(e.decel[0].rms_acceleration,2)),c=e.accel[0].rms_acceleration,m=e.decel[0].rms_acceleration,n=e.accel[0].time_final,r=e.decel[0].time_final,s=n),e.cruise&&e.accel&&e.decel){t=e.cruise[0].velocity_final,o=e.accel[0].acceleration_final,t=parseFloat(t),o=parseFloat(o),n=e.accel[0].time_final,s=e.cruise[0].time_final,r=e.decel[0].time_final;var f=Math.max(n,s,r,l);i=t*Math.sqrt((s-n+(r-s+n)/3)/f),c=e.accel[0].rms_acceleration,d=e.cruise[0].rms_acceleration,m=e.decel[0].rms_acceleration}var f=Math.max(n,s,r,l);a=Math.sqrt((Math.pow(c,2)*n+Math.pow(d,2)*(s-n)+Math.pow(m,2)*(r-s)+Math.pow(p,2)*(l-r))/f),D.peakVel=parseFloat(t),D.peakAcc=parseFloat(o),D.rmsVel=parseFloat(i),D.rmsAcc=parseFloat(a),de()};f.find("#profileButtons").on("click",".profileButton",function(t){t.preventDefault();var i=e(this).attr("id");void 0!=i&&c.activeProfileIndex!=parseInt(i.slice(3))&&(c.activeProfileIndex=parseInt(i.slice(3)),c.smoothness=O.find("#smoothnessInputContainer").find(".smoothnessDropDown").find(".smoothnessDDMenu")[0].selectedIndex,f.find("#profileButtons").find(".profileButton.btn-primary").removeClass("btn-primary").addClass("btn-default"),e(this).addClass("btn-primary").removeClass("btn-default"),c.velocityJerk=void 0,X(),be())});var W=function(){D.peakVel="",D.peakAcc="",D.rmsVel="",D.rmsAcc="",de()},X=function(){if(void 0==w.movedistance){var e=u.find("#inputControls .comboMoveDistance").data("unitsComboBox").getSIValue();w.movedistance=isNaN(parseFloat(e))?e:parseFloat(e)}if(void 0==w.movedtime){var t=u.find("#inputControls .comboMoveTime").data("unitsComboBox").getSIValue();w.movedtime=isNaN(parseFloat(t))?t:parseFloat(t)}if(void 0==w.dweltime){var i=u.find("#inputControls .comboDwellTime").data("unitsComboBox").getSIValue();w.dweltime=isNaN(parseFloat(i))?i:parseFloat(i)}void 0===c.velocityJerk?(se(),w.velocityJerk=isNaN(parseFloat(c.indexType))?c.indexType:parseFloat(c.indexType)):w.velocityJerk=isNaN(parseFloat(c.velocityJerk))?c.velocityJerk:parseFloat(c.velocityJerk),void 0==w.smoothness&&(w.smoothness=isNaN(parseFloat(c.smoothness))?c.smoothness:parseFloat(c.smoothness))},K=function(){var e=!0;return O.find(".input-entries .form-group").removeClass("has-error"),!isNaN(w.movedistance)&&w.movedistance>0||(O.find("#moveDistanceInputContainer").addClass("has-error"),e=!1),!isNaN(w.movedtime)&&w.movedtime>0||(O.find("#moveTimeInputContainer").addClass("has-error"),e=!1),!isNaN(w.dweltime)&&w.dweltime>=0||(O.find("#dwellTimeInputContainer").addClass("has-error"),e=!1),!isNaN(w.velocityJerk)&&w.velocityJerk>=1&&w.velocityJerk<=2||(O.find("#indexTypeInputContainer").addClass("has-error"),e=!1),c.assessmentMode&&O.find(".input-entries .form-group").removeClass("has-error"),e},Q=function(){M.time=0,M.position=0,M.velocity=0},Z=function(e){I=0;for(var t=_.vel.data[0][0],i=1;i<_.vel.data.length;i++)I+=(_.vel.data[i][0]-t)*_.vel.data[i][1],t=_.vel.data[i][0];h=-(1/0);var o=JSON.parse(JSON.stringify(w));o.velocityJerk=2,o.velocityJerk=1;for(var a=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(o,M).segmentData,i=0;i<Object.keys(a).length;i++)for(var n=0;n<a[Object.keys(a)[i]].length;n++)h<a[Object.keys(a)[i]][n].velocity_initial&&(h=a[Object.keys(a)[i]][n].velocity_initial);var s=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Velocity,"SI",c.graphUnits.Velocity);s&&1!=s&&(h=parseFloat(h)*s),T=2*h,e.dwell&&(U=e.dwell[0].time_initial)},$=function(t,i,o){e('<div id="tooltip">'+o+"</div>").css({top:i+5,left:t+15}).appendTo(u).fadeIn(200)},ee=function(e){var t=null,i=null,o=null;f.find("#velGraph").unbind("plothover").bind("plothover",function(a,n,s){if(t=s,s){var r=u.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Crest Factor"),o=s.seriesIndex;break;case 2:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Dwell Time"),o=s.seriesIndex;break;case 3:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Move Time"),o=s.seriesIndex}}else u.find("#tooltip").remove(),o=null;if(i&&i.seriesIndex){e.getData();switch(i.seriesIndex){case 1:var l;if(n.y>=T)l=100;else if(n.y<=h)l=0;else{var c=parseFloat(w.movedtime)-I/n.y;l=c*n.y*100/I}w.velocityJerk=parseFloat(Math.ceil(l)/100)+1;break;case 2:var d;d=n.x<U?0:parseFloat(n.x-U),w.dweltime=parseFloat(d);break;case 3:var m;m=n.x<=0?1:n.x,w.movedtime=parseFloat(m)}be(!0),pe()}}),f.find("#velGraph").unbind("mousedown").bind("mousedown",function(){if(u.find("#tooltip").remove(),t)switch(t.seriesIndex){case 1:t.datapoint[1]>=h&&t.datapoint[1]<=T&&(i=t);break;case 2:t.datapoint[0]>=U&&(i=t);break;case 3:t.datapoint[0]>0&&(i=t)}}),f.find("#velGraph").unbind("mouseup").bind("mouseup",function(){i&&c.onGraphDrag&&c.onGraphDrag(),i&&c.assessmentMode&&le(),i=null}),f.find("#velGraph").unbind("mouseleave").bind("mouseleave",function(){f.find("#velGraph").mouseup()})},te=function(e){var t=null,i=null,o=null;f.find("#posGraph").unbind("plothover").bind("plothover",function(a,n,s){if(t=s,d=!0,s){var r=u.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Move Distance"),o=s.seriesIndex}}else u.find("#tooltip").remove(),o=null;if(i&&i.seriesIndex){e.getData();switch(i.seriesIndex){case 1:var l;l=n.y<=0?1:parseFloat(n.y);var m=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Position,c.graphUnits.Position,"SI");m&&1!=m&&(l=parseFloat(l)*m),w.movedistance=parseFloat(l)}be(!0),pe()}}),f.find("#posGraph").unbind("mousedown").bind("mousedown",function(){if(u.find("#tooltip").remove(),t)switch(t.seriesIndex){case 1:t.datapoint[1]>0&&(i=t)}}),f.find("#posGraph").unbind("mouseup").bind("mouseup",function(){i&&c.onGraphDrag&&c.onGraphDrag(),i&&c.assessmentMode&&le(),i=null}),f.find("#posGraph").unbind("mouseleave").bind("mouseleave",function(){f.find("#posGraph").mouseup()})},ie=function(e){var t=null,i=null,o=null;f.find("#aioGraph").unbind("plothover").bind("plothover",function(a,n,s){if(t=s,s){var r=u.offset();if(o!=s.seriesIndex)switch(s.seriesIndex){case 1:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Move Distance"),o=s.seriesIndex;break;case 3:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Crest Factor"),o=s.seriesIndex;break;case 4:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Dwell Time"),o=s.seriesIndex;break;case 5:$(s.pageX-r.left,s.pageY-r.top,"Drag to change Move Time"),o=s.seriesIndex}}else u.find("#tooltip").remove(),o=null;if(i&&i.seriesIndex){e.getData();switch(i.seriesIndex){case 1:var l;l=n.y<=0?1:parseFloat(n.y);
var d=COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData.Position,c.graphUnits.Position,"SI");d&&1!=d&&(l=parseFloat(l)*d),w.movedistance=parseFloat(l);break;case 3:var m,p=c.showGraphs.indexOf(COSMATT.MotionProfile.ENUMS.Graphs.position)>-1?n.y2:n.y1;if(p>=T)m=100;else if(h>=p)m=0;else{var f=parseFloat(w.movedtime)-I/p;m=f*p*100/I}w.velocityJerk=parseFloat(Math.ceil(m)/100)+1;break;case 4:var v;v=n.x<U?0:parseFloat(n.x-U),w.dweltime=parseFloat(v);break;case 5:var x;x=n.x<=0?1:n.x,w.movedtime=parseFloat(x)}be(!0),pe()}}),f.find("#aioGraph").unbind("mousedown").bind("mousedown",function(){if(u.find("#tooltip").remove(),t)switch(t.seriesIndex){case 1:t.datapoint[1]>0&&(i=t);break;case 3:t.datapoint[1]>=h&&t.datapoint[1]<=T&&(i=t);break;case 4:t.datapoint[0]>=U&&(i=t);break;case 5:t.datapoint[0]>0&&(i=t)}}),f.find("#aioGraph").unbind("mouseup").bind("mouseup",function(){i&&c.onGraphDrag&&c.onGraphDrag(),i&&c.assessmentMode&&le(),i=null}),f.find("#aioGraph").unbind("mouseleave").bind("mouseleave",function(){f.find("#aioGraph").mouseup()})},oe=function(){if(x){var t=f.find("#posGraph .yaxisLabel"),i=Math.ceil(t.width()>t.height()?t.width():t.height());i%2!=0&&(i++,t.width(i)),t.css("top","-3%")}if(b){var t=f.find("#velGraph .yaxisLabel"),i=Math.ceil(t.width()>t.height()?t.width():t.height());i%2!=0&&(i++,t.width(i)),t.css("top","-3%")}if(y){var t=f.find("#accGraph .yaxisLabel"),i=Math.ceil(t.width()>t.height()?t.width():t.height());i%2!=0&&(i++,t.width(i)),t.css("top","-3%")}if(C){var t=f.find("#jerkGraph .yaxisLabel"),i=Math.ceil(t.width()>t.height()?t.width():t.height());i%2!=0&&(i++,t.width(i)),t.css("top","-3%")}if(g)for(var o=f.find("#aioGraph .axisLabels"),a=0;a<o.length;a++){var t=e(o[a]);if(!t.hasClass("xaxisLabel")){var i=Math.ceil(t.width()>t.height()?t.width():t.height());i%2!=0&&(i++,t.width(i)),t.css("top","-3%")}}},ae=function(e){if(w.velocityJerk>2)return F(),W(),void setTimeout(function(e){q(),L(!1)},0);v=COSMATT.ProfileCalculation.ProfileIndexModel.calculate(w,M);var t=v.elementsData,i=t.length;if(i>0){var o=100;F();for(var a=0;i>a;a++)z(t[a],o)}Y(v.segmentData),H(v.segmentData),ne(_),ne(P),Z(v.segmentData),e?G(v.segmentData):J(v.segmentData);var n={moveDistance:w.movedistance,moveTime:w.movedtime,dwellTime:w.dweltime,velocityFactor:w.velocityJerk,smoothness:w.smoothness};v.analysisData=D,c.notifyIOData&&"function"==typeof c.notifyIOData&&c.notifyIOData({inputs:n,output:v})},ne=function(e){for(var t=c.graphUnits,i=Object.keys(e),o=0;o<i.length;o++){var a=c.UnitData[e[i[o]].graphtype]?COSMATT.UNITCONVERTER.getConversionRatioById(c.UnitData[e[i[o]].graphtype],"SI",t[e[i[o]].graphtype]):void 0;if(a&&1!=a)for(var n=0;n<e[i[o]].data.length;n++)e[i[o]].data[n][1]*=a}},se=function(){switch(c.activeProfileIndex=parseInt(c.activeProfileIndex),c.activeProfileIndex){case 1:c.indexType=1.5;break;case 2:c.indexType=2;break;case 3:c.indexType=1}},re=function(){d=!1,be()},le=function(){c.assessmentMode&&c.userResponseNotifier&&c.userResponseNotifier({movedistance:{value:w.movedistance,unit:c.moveDistanceUnit},movedtime:{value:w.movedtime,unit:c.moveTimeUnit},dweltime:{value:w.dweltime,unit:c.dwellTimeUnit},velocityJerk:{value:w.velocityJerk}})},ce=function(){var t=u.find("#inputControls");t.append('<form class="form-horizontal"> <div class="input-entries inputs"> <div class="form-group input-container" id="moveDistanceInputContainer"> <label for="moveDistance" class="control-label">Move Distance</label> <div class="combo-container comboMoveDistance"></div></div><div class="form-group input-container" id="moveTimeInputContainer"> <label for="moveTime" class="control-label">Move Time</label> <div class="combo-container comboMoveTime"></div></div><div class="form-group input-container" id="indexTypeInputContainer"> <label for="indexType" class="control-label">Crest Factor</label> <div class="combo-container comboIndexType"></div></div> <div class="form-group input-container" id="dwellTimeInputContainer"> <label for="dwellTime" class="control-label">Dwell Time</label> <div class="combo-container comboDwellTime"></div></div><div class="form-group input-container" id="smoothnessInputContainer"> <label for="smoothness" class="control-label">Smoothness</label> <div class="combo-container smoothnessDropDown"></div></div></div><div class="output-entries inputs"> <div class="form-group input-container" id="peakVelocityInputContainer"> <label for="peakVelocity" class="control-label">Peak Velocity</label> <div class="combo-container comboPeakVelocity"></div></div><div class="form-group input-container" id="rmsVelocityInputContainer"> <label for="rmsVelocity" class="control-label">RMS Velocity</label> <div class="combo-container comboRmsVelocity"></div></div><div class="form-group input-container" id="peakAccInputContainer"> <label for="peakAcc" class="control-label">Peak Acceleration</label> <div class="combo-container comboPeakAcc"></div></div><div class="form-group input-container" id="rmsAccInputContainer"> <label for="rmsAcc" class="control-label">RMS Acceleration</label> <div class="combo-container comboRmsAcc"></div></div></div></form>'),t.find("#moveDistanceInputContainer").find(".comboMoveDistance").unitsComboBox({unitType:c.UnitData.Position,unit:c.moveDistanceUnit,roundOfNumber:"2",value:c.moveDistance,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?c.moveDistanceUnit=this.unit:"textbox"==this.type&&(w.movedistance=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),re()),le())}});var i=t.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox");i.setDropBoxItem(c.moveDistanceDefaultUnit),t.find("#moveTimeInputContainer").find(".comboMoveTime").unitsComboBox({unitType:"TIME",unit:c.moveTimeUnit,roundOfNumber:"2",value:c.moveTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?c.moveTimeUnit=this.unit:"textbox"==this.type&&(w.movedtime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),re()),le())}}),t.find("#dwellTimeInputContainer").find(".comboDwellTime").unitsComboBox({unitType:"TIME",unit:c.dwellTimeUnit,roundOfNumber:"2",value:c.dwellTime,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("dropdown"==this.type?c.dwellTimeUnit=this.unit:"textbox"==this.type&&(w.dweltime=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?"":parseFloat(this.SIValue),re()),le())}}),t.find("#indexTypeInputContainer").find(".comboIndexType").unitsComboBox({unitType:"PERCENTAGE",unit:c.velocityFactorUnit,roundOfNumber:"2",value:c.indexType,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},showTextBoxOnly:"true",numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&("textbox"==this.type&&(w.velocityJerk=isNaN(parseFloat(this.value))||isNaN(this.SIValue)?0:parseFloat(this.SIValue),re()),le())}});var o=t.find("#smoothnessInputContainer").find(".smoothnessDropDown");o.append('<select class="form-control smoothnessDDMenu"><option value=automatic>Automatic<option value=standard>Standard<option value=maximum>Maximum</select>'),c.smoothness&&o.find("select option").eq(c.smoothness).attr("selected",!0),o.find("select").on("change",function(e){w.smoothness=e.target.selectedIndex,be(!0)}),t.find("#peakVelocityInputContainer").find(".comboPeakVelocity").unitsComboBox({unitType:c.UnitData.Velocity,unit:c.peakVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(c.peakVelocityUnit=parseInt(this.unit.split("_")[1])-1)}});var a=t.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox");a.setDropBoxItem(c.peakVelocityDefaultUnit),t.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").unitsComboBox({unitType:c.UnitData.Velocity,unit:c.rmsVelocityUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(c.rmsVelocityUnit=parseInt(this.unit.split("_")[1])-1)}});var n=t.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox");n.setDropBoxItem(c.rmsVelocityDefaultUnit),t.find("#peakAccInputContainer").find(".comboPeakAcc").unitsComboBox({unitType:c.UnitData.Acceleration,unit:c.peakAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(c.peakAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),t.find("#rmsAccInputContainer").find(".comboRmsAcc").unitsComboBox({unitType:c.UnitData.Acceleration,unit:c.rmsAccelarationUnit,roundOfNumber:"2",value:0,comboBoxWidthRatio:{textBox:"30%",comboBox:"32%"},numberFormatterOptions:c.numberFormatterOptions,callBackFn:function(){void 0!=this.type&&"dropdown"==this.type&&(c.rmsAccelarationUnit=parseInt(this.unit.split("_")[1])-1)}}),t.resize(function(i){var o=e(i.target);if(o.width()<839){u.addClass("lowerResolution"),t.find(".input-entries").css("width","55%"),t.find(".output-entries").css("width","45%");var a=t.find(".input-container .combo-container .cosmatt-unitComboBox");a.find(".unitTextBox").css("max-width","100px"),a.find(".unitComboBox").css("max-width","100px");var n=t.find(".input-container#indexTypeInputContainer .combo-container .cosmatt-unitComboBox");n.find(".unitTextBox").css("max-width","210px"),n.find(".unitTextBox").css("width","62%")}else if(o.width()>=839){u.removeClass("lowerResolution"),t.find(".input-entries").css("width","50%"),t.find(".output-entries").css("width","50%");var a=t.find(".input-container .combo-container .cosmatt-unitComboBox");a.find(".unitTextBox").css("max-width","100px"),a.find(".unitComboBox").css("max-width","100px");var n=t.find(".input-container#indexTypeInputContainer .combo-container .cosmatt-unitComboBox");n.find(".unitTextBox").css("max-width","210px"),n.find(".unitTextBox").css("width","65%")}o.width()<1239&&o.width()>839?u.addClass("resizeon1240"):o.width()>=1239&&u.removeClass("resizeon1240")}),t.width()<1239&&t.trigger("resize")},de=function(){var e;return e=O.find("#peakVelocityInputContainer").find(".comboPeakVelocity").data("unitsComboBox"),D.peakVel?e.setTextBoxValue(e.getValueInSelectedUnit(D.peakVel)):e.setTextBoxValue(D.peakVel),e=O.find("#rmsVelocityInputContainer").find(".comboRmsVelocity").data("unitsComboBox"),D.rmsVel?e.setTextBoxValue(e.getValueInSelectedUnit(D.rmsVel)):e.setTextBoxValue(D.rmsVel),e=O.find("#peakAccInputContainer").find(".comboPeakAcc").data("unitsComboBox"),D.peakAcc?e.setTextBoxValue(e.getValueInSelectedUnit(D.peakAcc)):e.setTextBoxValue(D.peakAcc),e=O.find("#rmsAccInputContainer").find(".comboRmsAcc").data("unitsComboBox"),D.rmsAcc?e.setTextBoxValue(e.getValueInSelectedUnit(D.rmsAcc)):e.setTextBoxValue(D.rmsAcc),0==d?void(d=!0):void me()},me=function(){var e=O.find("#indexTypeInputContainer").find(".comboIndexType").data("unitsComboBox");w.velocityJerk?e.setTextBoxValue(e.getValueInSelectedUnit(w.velocityJerk)):e.setTextBoxValue(w.velocityJerk)},pe=function(){var e;e=O.find("#moveDistanceInputContainer").find(".comboMoveDistance").data("unitsComboBox"),w.movedistance?e.setTextBoxValue(e.getValueInSelectedUnit(w.movedistance)):e.setTextBoxValue(w.movedistance),e=O.find("#moveTimeInputContainer").find(".comboMoveTime").data("unitsComboBox"),w.movedtime?e.setTextBoxValue(e.getValueInSelectedUnit(w.movedtime)):e.setTextBoxValue(w.movedtime),e=O.find("#dwellTimeInputContainer").find(".comboDwellTime").data("unitsComboBox"),w.dweltime?e.setTextBoxValue(e.getValueInSelectedUnit(w.dweltime)):e.setTextBoxValue(w.dweltime)},fe=function(e){var t=u.find("#profileButtons");t.find("#btn"+c.activeProfileIndex).addClass("btn-primary").removeClass("btn-default"),c.showProfiles&&ue(c.showProfiles,t),c.showGraphDragHandles&&ve(c.showGraphDragHandles),c.readOnlyInputs&&he(c.readOnlyInputs),c.hideInputs&&Te(c.hideInputs)},ue=function(e,t){if(t.find("button").hide(),"boolean"==typeof e)e===!0?t.show():t.hide();else if(e.length>0)for(var i in e)i=e[i],t.find("#btn"+i.slice(i.length-1)).show()},ve=function(e){"boolean"==typeof e&&(e===!0?c.showGraphDragHandles=[COSMATT.MotionProfile.ENUMS.GraphHandles.position,COSMATT.MotionProfile.ENUMS.GraphHandles.peakVelocity,COSMATT.MotionProfile.ENUMS.GraphHandles.moveTime,COSMATT.MotionProfile.ENUMS.GraphHandles.dwellTime]:c.showGraphDragHandles=[])},he=function(e){if("boolean"==typeof e&&(e=e===!0?[COSMATT.MotionProfile.ENUMS.DataFields.moveDistance,COSMATT.MotionProfile.ENUMS.DataFields.moveTime,COSMATT.MotionProfile.ENUMS.DataFields.dwellTime,COSMATT.MotionProfile.ENUMS.DataFields.velocityFormFactor,COSMATT.MotionProfile.ENUMS.DataFields.peakVelocity,COSMATT.MotionProfile.ENUMS.DataFields.rmsVelocity,COSMATT.MotionProfile.ENUMS.DataFields.peakAccelaration,COSMATT.MotionProfile.ENUMS.DataFields.rmsAccelaration]:[]),e.length>0)for(var t in e)e.hasOwnProperty(t)&&(t=e[t],O.find("#"+t+"InputContainer").find(".combo"+t.charAt(0).toUpperCase()+t.slice(1)).data("unitsComboBox").update({enable:{textbox:"false",comboBox:"true"}}))},Te=function(e){if("boolean"==typeof e&&(e===!0?O.hide():O.show()),e.length>0)for(var t in e)e.hasOwnProperty(t)&&(t=e[t],O.find("#"+t+"InputContainer").hide())},xe=function(){var t=e("body"),i='<div id="editConfigBtnContainer"><button class="btn btn-default editConfigBtn pull-right btn-lg" type="button" href="configWindow.html" data-target="#theModal" data-toggle="modal">Edit Configurations</div>';t.append(i)};ce(),fe(u),c.showEditConfigButton&&xe(),c.showCheckAnswerButton,X(),Q();var be=function(e,t){if(K())t?setTimeout(function(e){ae()},0):ae(e);else{F(),W(),setTimeout(function(e){q(),L(!1)},0);var i={moveDistance:w.movedistance,moveTime:w.movedtime,dwellTime:w.dweltime,velocityFactor:w.velocityJerk,smoothness:w.smoothness};"object"==typeof v?v.analysisData=D:(v={},v.analysisData=D),c.notifyIOData&&"function"==typeof c.notifyIOData&&c.notifyIOData({inputs:i,output:v})}oe(),f.on("resize",function(){oe()})};return be(!1,!0),{ref:this,updateInputs:i,markAnswers:o,getProfileValues:n}}}(jQuery),window.COSMATT=window.COSMATT||{},COSMATT.MotionProfile=COSMATT.MotionProfile||{},COSMATT.MotionProfile.getDefaults=function(e){return{activeProfileIndex:1,moveDistance:125.664,moveTime:10,dwellTime:2,graphMode:COSMATT.MotionProfile.ENUMS.GraphMode.individualAxis,showGraphs:[COSMATT.MotionProfile.ENUMS.Graphs.velocity],showGraphDragHandles:COSMATT.MotionProfile.ENUMS.GraphHandles.showAll,readOnlyInputs:!1,hideInputs:!1,showProfiles:COSMATT.MotionProfile.ENUMS.Profiles.showAll,smoothness:COSMATT.MotionProfile.ENUMS.Smoothness.automatic,showCheckAnswerButton:!1,assessmentMode:!1,moveTimeUnit:"second",dwellTimeUnit:"second",velocityFactorUnit:"percentage",numberFormatterOptions:{significantDigits:3,maxPositiveExponent:6,minNegativeExponent:-4},notifyIOData:""}},COSMATT.MotionProfile.getRotaryDefaults=function(){return{linearOrRotary:COSMATT.MotionProfile.ENUMS.LinearOrRotary.Rotary,graphUnits:{Velocity:"revolutionsperminute",Position:"revolution",Acceleration:"radianpersecondsquare",Jerk:"radianpersecondcube"},UnitData:{Velocity:"ANGULARVELOCITY",Position:"ANGULARDISTANCE",Acceleration:"ANGULARACCELERATION",Jerk:"ANGULARJERK"},moveDistanceUnit:"radian",peakVelocityUnit:"radianpersecond",rmsVelocityUnit:"radianpersecond",peakAccelarationUnit:"radianpersecondsquare",rmsAccelarationUnit:"radianpersecondsquare",moveDistanceDefaultUnit:"revolution",peakVelocityDefaultUnit:"revolutionsperminute",rmsVelocityDefaultUnit:"revolutionsperminute"}},COSMATT.MotionProfile.getlinearDefaults=function(){return{linearOrRotary:COSMATT.MotionProfile.ENUMS.LinearOrRotary.Linear,graphUnits:{Velocity:"meterpersecond",Position:"meter",Acceleration:"meterpersecondsquare",Jerk:"meterpersecondcube"},UnitData:{Velocity:"VELOCITY",Position:"LINEARDISTANCE",Acceleration:"ACCELERATION",Jerk:"JERK"},moveDistanceUnit:"meter",peakVelocityUnit:"meterpersecond",rmsVelocityUnit:"meterpersecond",peakAccelarationUnit:"meterpersecondsquare",rmsAccelarationUnit:"meterpersecondsquare",moveDistanceDefaultUnit:"meter",peakVelocityDefaultUnit:"meterpersecond",rmsVelocityDefaultUnit:"meterpersecond"}};