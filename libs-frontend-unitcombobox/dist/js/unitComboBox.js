var unitData = {"unitType": {
            "LINEARDISTANCE": {
                "unit": [{
                    "symbol": "m",
                    "name": "meter",
                    "conversionFactor": 0.0254,
                    "id": "meter",
                    "isSI": true
                }, {
                    "symbol": "cm",
                    "name": "centimeter",
                    "conversionFactor": 2.54,
                    "id": "centimeter"
                }, {
                    "symbol": "mm",
                    "name": "millimeter",
                    "conversionFactor": 25.4,
                    "id": "millimeter",
                    "isMetric": true
                }, {
                    "symbol": "in",
                    "name": "inch",
                    "conversionFactor": 1,
                    "id": "inch",
                    "isImperial": true
                }, {
                    "symbol": "ft",
                    "name": "feet",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feet"
                }, {
                    "symbol": "Km",
                    "name": "kilometer",
                    "conversionFactor": 0.0000254,
                    "id": "kilometer"
                }]
            },
            "ANGULARDISTANCE": {
                "unit": [{
                    "symbol": "rad",
                    "name": "radian",
                    "conversionFactor": 6.28318530717958,
                    "id": "radian",
                    "isSI": true
                }, {
                    "symbol": "deg",
                    "name": "degree",
                    "conversionFactor": 360,
                    "id": "degree"
                }, {
                    "symbol": "rev",
                    "name": "revolution",
                    "conversionFactor": 1,
                    "id": "revolution",
                    "isMetric": true,
                    "isImperial": true
                }, {
                    "symbol": "min",
                    "name": "minute",
                    "conversionFactor": 21600,
                    "id": "minute"
                }]
            },
            "VELOCITY": {
                "unit": [{
                    "symbol": "m/sec",
                    "name": "meter/second",
                    "conversionFactor": 0.0254,
                    "id": "meterpersecond",
                    "isSI": true
                }, {
                    "symbol": "cm/sec",
                    "name": "centimeter/second",
                    "conversionFactor": 2.54,
                    "id": "centimeterpersecond"
                }, {
                    "symbol": "mm/sec",
                    "name": "millimeter/second",
                    "conversionFactor": 25.4,
                    "id": "millimeterpersecond",
                    "isMetric": true
                }, {
                    "symbol": "in/sec",
                    "name": "inch/second",
                    "conversionFactor": 1,
                    "id": "inchpersecond",
                    "isImperial": true
                }, {
                    "symbol": "ft/sec",
                    "name": "feet/second",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feetpersecond"
                }, {
                    "symbol": "ft/min",
                    "name": "feet/minute",
                    "conversionFactor": 5,
                    "id": "feetperminute"
                }]
            },
            "ANGULARVELOCITY": {
                "unit": [{
                    "symbol": "rad/sec",
                    "name": "radian/second",
                    "conversionFactor": 1,                    
                    "isSI": true,
                    "id": "radianpersecond"
                    
                }, {
                    "symbol": "deg/sec",
                    "name": "degree/second",
                    "conversionFactor": 57.2957795130823,
                    "id": "degreepersecond"
                }, {
                    "symbol": "rev/sec",
                    "name": "revolution/second",
                    "conversionFactor": 0.159154943091895,
                    "id": "revolutionpersecond"
                }, {
                    "symbol": "rpm",
                    "name": "revolutions/minute",
                    "conversionFactor": 9.54929658551372,
                    "id": "revolutionsperminute",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "ACCELERATION": {
                "unit": [{
                    "symbol": "m/sec&sup2;",
                    "name": "meter/second²",
                    "conversionFactor": 0.0254,
                    "id": "meterpersecondsquare",
                    "isSI": true
                }, {
                    "symbol": "cm/sec&sup2;",
                    "name": "centimeter/second²",
                    "conversionFactor": 2.54,
                    "id": "centimeterpersecondsquare"
                }, {
                    "symbol": "mm/sec&sup2;",
                    "name": "millimeter/second²",
                    "conversionFactor": 25.4,
                    "id": "millimeterpersecondsquare",
                    "isMetric": true
                }, {
                    "symbol": "in/sec&sup2;",
                    "name": "inch/second²",
                    "conversionFactor": 1,
                    "id": "inchpersecondsquare",
                    "isImperial": true
                }, {
                    "symbol": "ft/sec&sup2;",
                    "name": "feet/second²",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feetpersecondsquare"
                }, {
                    "symbol": "g",
                    "name": "gravity acceleration",
                    "conversionFactor": 0.00259007914966232,
                    "id": "gravityacceleration"
                }]
            },
            "ANGULARACCELERATION": {
                "unit": [{
                    "symbol": "rad/sec&sup2;",
                    "name": "radian/second²",
                    "conversionFactor": 1,
                    "id": "radianpersecondsquare",
                    "isSI": true
                }, {
                    "symbol": "deg/sec&sup2;",
                    "name": "degree/second²",
                    "conversionFactor": 57.2957795130823,
                    "id": "degreepersecondsquare"
                }, {
                    "symbol": "rev/sec&sup2;",
                    "name": "revolutions/second²",
                    "conversionFactor": 0.159154943091895,
                    "id": "revolutionspersecondsquare"
                }, {
                    "symbol": "rpm/sec",
                    "name": "revolutions per minute/second",
                    "conversionFactor": 9.54929658551372,
                    "id": "revolutionsperminutepersecond",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "TIME": {
                "unit": [{
                    "symbol": "sec",
                    "name": "second",
                    "conversionFactor": 60,
                    "id": "second",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }, {
                    "symbol": "min",
                    "name": "minute",
                    "conversionFactor": 1,
                    "id": "minute"
                }, {
                    "symbol": "msec",
                    "name": "millisecond",
                    "conversionFactor": 60000,
                    "id": "millisecond"
                }]
            },
            "MASS": {
                "unit": [{
                    "symbol": "kg",
                    "name": "kilogram",
                    "conversionFactor": 0.0283495199999999,
                    "id": "kilogram",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "gm",
                    "name": "gram",
                    "conversionFactor": 28.3495199999999,
                    "id": "gram"
                }, {
                    "symbol": "oz",
                    "name": "ounce",
                    "conversionFactor": 1,
                    "id": "ounce"
                }, {
                    "symbol": "lb",
                    "name": "pound",
                    "conversionFactor": 0.0625,
                    "id": "pound",
                    "isImperial": true
                }]
            },
            "FORCE": {
                "unit": [{
                    "symbol": "N",
                    "name": "newton",
                    "conversionFactor": 4.4482216153,
                    "id": "newton",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "kgf",
                    "name": "kilogram-force",
                    "conversionFactor": 0.45359237,
                    "id": "kilogramforce"
                }, {
                    "symbol": "lbf",
                    "name": "pound-force",
                    "conversionFactor": 1,
                    "id": "poundforce",
                    "isImperial": true
                }, {
                    "symbol": "dyne",
                    "name": "dyne",
                    "conversionFactor": 444822.161526051,
                    "id": "dyne"
                }]
            },
            "TORQUE": {
                "unit": [{
                    "symbol": "N-m",
                    "name": "newton-meter",
                    "conversionFactor": 0.007061552,
                    "id": "newtonmeter",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "oz-in",
                    "name": "ounce-inch",
                    "conversionFactor": 1,
                    "id": "ounceinch"
                }, {
                    "symbol": "lb-in",
                    "name": "pound-inch",
                    "conversionFactor": 0.0625,
                    "id": "poundinch",
                    "isImperial": true
                }, {
                    "symbol": "lb-ft",
                    "name": "pound-feet",
                    "conversionFactor": 0.00520833333333333,
                    "id": "poundfeet"
                }]
            },
            "INERTIA": {
                "unit": [{
                    "symbol": "kg-m&sup2;",
                    "name": "kilogram-meter²",
                    "conversionFactor": 0.00001828997852042,
                    "id": "kilogrammetersquare",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "kg-cm&sup2;",
                    "name": "kilogram-centimeter²",
                    "conversionFactor": 0.1828997852042,
                    "id": "kilogramcentimetersquare"
                }, {
                    "symbol": "Nm-s&sup2;",
                    "name": "newton-meter-second²",
                    "conversionFactor": 0.00001828997852042,
                    "id": "newtonmetersecondsquare"
                }, {
                    "symbol": "oz-in-s&sup2;",
                    "name": "ounce-inch-second²",
                    "conversionFactor": 0.002590079179883,
                    "id": "ounceinchsecondsquare"
                }, {
                    "symbol": "lb-in-s&sup2;",
                    "name": "pound-inch-second²",
                    "conversionFactor": 0.0001618799487976,
                    "id": "poundinchsecondsquare",
                    "isImperial": true
                }, {
                    "symbol": "lb-ft-s&sup2;",
                    "name": "pound-feet-second²",
                    "conversionFactor": 0.00001348999573283,
                    "id": "poundfeetsecondsquare"
                }, {
                    "symbol": "oz-in&sup2;",
                    "name": "ounce-inch²",
                    "conversionFactor": 1,
                    "id": "ounceinchsquare"
                }, {
                    "symbol": "lb-in&sup2;",
                    "name": "pound-inch²",
                    "conversionFactor": 0.06250000061883,
                    "id": "INERTIA_8"
                }, {
                    "symbol": "lb-ft&sup2;",
                    "name": "pound-feet²",
                    "conversionFactor": 0.0004340277820752,
                    "id": "poundfeetsquare"
                }, {
                    "symbol": "gm-mm&sup2;",
                    "name": "gram-millimeter²",
                    "conversionFactor": 18289.97852042,
                    "id": "grammillimetersquare"
                }, {
                    "symbol": "Kg-mm&sup2;",
                    "name": "kilogram-millimeter²",
                    "conversionFactor": 18.28997852042,
                    "id": "kilogrammillimetersquare"
                }]
            },
            "POWER": {
                "unit": [{
                    "symbol": "watts",
                    "name": "watts",
                    "conversionFactor": 746,
                    "id": "watts",
                    "isSI": true
                }, {
                    "symbol": "HP",
                    "name": "horsepower",
                    "conversionFactor": 1,
                    "id": "horsepower",
                    "isImperial": true
                }, {
                    "symbol": "kW",
                    "name": "kilo-watt",
                    "conversionFactor": 0.746,
                    "id": "kilowatt",
                    "isMetric": true
                }]
            },
            "TEMPERATURE": {
                "unit": [{
                    "symbol": "&#176;C",
                    "name": "celsius",
                    "conversionFactor": 1,
                    "id": "celsius",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "&#176;F",
                    "name": "fahrenheit",
                    "conversionFactor": 1,
                    "id": "fahrenheit",
                    "isImperial": true
                }]
            },
            "TORQUECONSTANT": {
                "unit": [{
                    "symbol": "Nm/A",
                    "name": "newton-meter/ampere",
                    "conversionFactor": 1,
                    "id": "newtonmeterperampere",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "kg-m/A",
                    "name": "kilogram-meter/ampere",
                    "conversionFactor": 0.101971621296887,
                    "id": "kilogrammeterperampere"
                }, {
                    "symbol": "kg-cm/A",
                    "name": "kilogram-cm/ampere",
                    "conversionFactor": 10.1971621296887,
                    "id": "kilogramcmperampere"
                }, {
                    "symbol": "gm-cm/A",
                    "name": "gram-centimeter/ampere",
                    "conversionFactor": 10197.1621296887,
                    "id": "gramcentimeterperampere"
                }, {
                    "symbol": "oz-in/A",
                    "name": "ounce-inch/ampere",
                    "conversionFactor": 141.61193228,
                    "id": "ounceinchperampere"
                }, {
                    "symbol": "lb-in/A",
                    "name": "pound-inch/ampere",
                    "conversionFactor": 8.85074577,
                    "id": "poundinchampere",
                    "isImperial": true
                }, {
                    "symbol": "lb-ft/A",
                    "name": "pound-feet/ampere",
                    "conversionFactor": 0.73756215,
                    "id": "poundfeetperampere"
                }]
            },
            "DAMPINGCONSTANT": {
                "unit": [{
                    "symbol": "Nm/krpm",
                    "name": "newton-meter/krpm",
                    "conversionFactor": 1,
                    "id": "newtonmeterperkrpm"
                }, {
                    "symbol": "kg-m/krpm",
                    "name": "kilogram-meter/krpm",
                    "conversionFactor": 0.101971621296887,
                    "id": "kilogrammeterperkrpm"
                }, {
                    "symbol": "kg-cm/krpm",
                    "name": "kilogram-centimeter/krpm",
                    "conversionFactor": 10.1971621296887,
                    "id": "kilogramcentimeterperkrpm"
                }, {
                    "symbol": "gm-cm/krpm",
                    "name": "gram-centimeter/krpm",
                    "conversionFactor": 10197.1621296887,
                    "id": "gramcentimeterperkrpm"
                }, {
                    "symbol": "oz-in/krpm",
                    "name": "ounce-inch/krpm",
                    "conversionFactor": 141.61193228,
                    "id": "ounceinchperkrpm"
                }, {
                    "symbol": "lb-in/krpm",
                    "name": "pound-inch/krpm",
                    "conversionFactor": 8.85074577,
                    "id": "poundinchperkrpm",
                    "isImperial": true
                }, {
                    "symbol": "lb-ft/krpm",
                    "name": "pound-feet/krpm",
                    "conversionFactor": 0.73756215,
                    "id": "poundfeetperkrpm"
                }, {
                    "symbol": "Nm/rad/sec",
                    "name": "newton-meter/radian/second",
                    "conversionFactor": 0.00954929658551372,
                    "id": "newtonmeterperradianpersecond",
                    "isSI": true,
                    "isMetric": true
                }]
            },
            "THERMALRESISTANCE": {
                "unit": [{
                    "symbol": "ºC/Watt",
                    "name": "celsius/watt",
                    "conversionFactor": 1,
                    "id": "celsiusperwatt",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "RESISTANCE": {
                "unit": [{
                    "symbol": "Ohms",
                    "name": "ohms",
                    "conversionFactor": 1,
                    "id": "ohms",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "INDUCTANCE": {
                "unit": [{
                    "symbol": "H",
                    "name": "henry",
                    "conversionFactor": 1,
                    "id": "henry",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "CURRENT": {
                "unit": [{
                    "symbol": "A(0-pk)",
                    "name": "ampere(0 to peak)",
                    "conversionFactor": 1,
                    "id": "amperezerotopeak",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }, {
                    "symbol": "A(RMS)",
                    "name": "ampere(root mean square)",
                    "conversionFactor": 0.707106781186547,
                    "id": "ampererootmeansquare"
                }]
            },
            "TEMPERATURECOFFICIENT": {
                "unit": [{
                    "symbol": "/ºC",
                    "name": "/celsius",
                    "conversionFactor": 1,
                    "id": "percelsius",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "%/ºC",
                    "name": "%/celsius",
                    "conversionFactor": 100,
                    "id": "percentagepercelsius",
                    "isImperial": true
                }]
            },
            "CAPACITANCE": {
                "unit": [{
                    "symbol": "F",
                    "name": "farad",
                    "conversionFactor": 1,
                    "id": "farad",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }, {
                    "symbol": "µF",
                    "name": "micro-farad",
                    "conversionFactor": 1000000,
                    "id": "microfarad"
                }]
            },
            "VOLTAGE": {
                "unit": [{
                    "symbol": "Volts",
                    "name": "volts",
                    "conversionFactor": 1,
                    "id": "volts",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "DENSITY": {
                "unit": [{
                    "symbol": "Kg/m&sup3",
                    "name": "kilogram/meter³",
                    "conversionFactor": 27679.9047,
                    "id": "kilogrampermetercube",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "Kg/cm&sup3",
                    "name": "kilogram/centimeter³",
                    "conversionFactor": 0.0276799047,
                    "id": "kilogrampercentimetercube"
                }, {
                    "symbol": "gm/m&sup3",
                    "name": "gram/meter³",
                    "conversionFactor": 27679904.7,
                    "id": "grampermetercube"
                }, {
                    "symbol": "lb/in&sup3",
                    "name": "pound/inch³",
                    "conversionFactor": 1,
                    "id": "poundperinchcube",
                    "isImperial": true
                }, {
                    "symbol": "lb/ft&sup3",
                    "name": "pound/feet³",
                    "conversionFactor": 1728,
                    "id": "poundperfeetcube"
                }, {
                    "symbol": "gm/cm&sup3",
                    "name": "gram/centimeter³",
                    "conversionFactor": 27.6799047,
                    "id": "grampercentimetercube",
                    "isMetric": true
                }]
            },
            "ROLLOFF": {
                "unit": [{
                    "symbol": "Nm/(rad/sec)&sup2",
                    "name": "newton-meter/(radian/second)²",
                    "conversionFactor": 1,
                    "id": "newtonmeterperradianpersecondsquare",
                    "isSI": true,
                    "isMetric": true
                }]
            },
            "MAGNETTEMPCOFFICIENT": {
                "unit": []
            },
            "LEAD": {
                "unit": [{
                    "symbol": "mm/rev",
                    "name": "millimeter/revolution",
                    "conversionFactor": 1,
                    "id": "millimeterperrevolution",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "in/rev",
                    "name": "inch/revolution",
                    "conversionFactor": 0.03937007874016,
                    "id": "inchperrevolution",
                    "isImperial": true
                }]
            },
            "INCLINATION": {
                "unit": [{
                    "symbol": "rad",
                    "name": "radian",
                    "conversionFactor": 0.0174532925199433,
                    "id": "radian",
                    "isSI": true
                }, {
                    "symbol": "deg",
                    "name": "radian",
                    "conversionFactor": 1,
                    "id": "radian",
                    "isMetric": true
                }]
            },
            "DIAMETER": {
                "unit": [{
                    "symbol": "mm",
                    "name": "millimeter",
                    "conversionFactor": 25.4,
                    "id": "millimeter",
                    "isMetric": true
                }, {
                    "symbol": "cm",
                    "name": "centimeter",
                    "conversionFactor": 2.54,
                    "id": "centimeter"
                }, {
                    "symbol": "m",
                    "name": "meter",
                    "conversionFactor": 0.0254,
                    "id": "meter",
                    "isSI": true
                }, {
                    "symbol": "in",
                    "name": "inch",
                    "conversionFactor": 1,
                    "id": "inch",
                    "isImperial": true
                }, {
                    "symbol": "ft",
                    "name": "feet",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feet"
                }]
            },
            "FORCECONSTANT": {
                "unit": [{
                    "symbol": "N/A",
                    "name": "newton/ampere",
                    "conversionFactor": 1,
                    "id": "newtonperampere",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "kg/A",
                    "name": "kilogram/ampere",
                    "conversionFactor": 0.101971621296887,
                    "id": "kilogramperampere"
                }, {
                    "symbol": "gm/A",
                    "name": "gram/ampere",
                    "conversionFactor": 101.971621296887,
                    "id": "gramperampere"
                }, {
                    "symbol": "oz/A",
                    "name": "ounce/ampere",
                    "conversionFactor": 3.59694,
                    "id": "ounceperampere"
                }, {
                    "symbol": "lb/A",
                    "name": "pound/ampere",
                    "conversionFactor": 0.224809,
                    "id": "poundperampere",
                    "isImperial": true
                }]
            },
            "ENERGY": {
                "unit": [{
                    "symbol": "J",
                    "name": "joules",
                    "conversionFactor": 1,
                    "id": "joules",
                    "isSI": true
                }]
            },
            "LIFE": {
                "unit": [{
                    "symbol": "Year",
                    "name": "year",
                    "conversionFactor": 1,
                    "id": "year",
                    "isSI": true,
                    "isMetric": true,
                    "isImperial": true
                }, {
                    "symbol": "Days",
                    "name": "days",
                    "conversionFactor": 365,
                    "id": "days"
                }, {
                    "symbol": "Weeks",
                    "name": "weeks",
                    "conversionFactor": 52.1428571428571,
                    "id": "weeks"
                }]
            },
            "ALTITUDE": {
                "unit": [{
                    "symbol": "m",
                    "name": "meter",
                    "conversionFactor": 0.0254,
                    "id": "meter",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "cm",
                    "name": "centimeter",
                    "conversionFactor": 2.54,
                    "id": "centimeter"
                }, {
                    "symbol": "mm",
                    "name": "millimeter",
                    "conversionFactor": 25.4,
                    "id": "millimeter"
                }, {
                    "symbol": "in",
                    "name": "inch",
                    "conversionFactor": 1,
                    "id": "inch"
                }, {
                    "symbol": "ft",
                    "name": "feet",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feet",
                    "isImperial": true
                }, {
                    "symbol": "Km",
                    "name": "kilometer",
                    "conversionFactor": 0.0000254,
                    "id": "kilometer"
                }]
            },
            "LINEARDAMPING": {
                "unit": [{
                    "symbol": "N/m/s",
                    "name": "newton/meter/second",
                    "conversionFactor": 175.126818058489,
                    "id": "newtonpermeterpersecond",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "kgf/m/s",
                    "name": "kilogram-force/meter/second",
                    "conversionFactor": 17.8579653543307,
                    "id": "kilogramforcepermeterpersecond"
                }, {
                    "symbol": "lbf/in/s",
                    "name": "pound-force/inch/second",
                    "conversionFactor": 1,
                    "id": "poundforceperinchpersecond",
                    "isImperial": true
                }]
            },
            "CURRENCY": {
                "unit": [{
                    "symbol": "$(USD)",
                    "name": "dollar",
                    "conversionFactor": 1,
                    "id": "dollar",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "EUR",
                    "name": "euro",
                    "conversionFactor": 0.703,
                    "id": "euro"
                }, {
                    "symbol": "GBP",
                    "name": "great british pound",
                    "conversionFactor": 0.491,
                    "id": "greatbritishpound",
                    "isImperial": true
                }]
            },
            "JERK": {
                "unit": [{
                    "symbol": "m/sec&sup3",
                    "name": "meter/second³",
                    "conversionFactor": 0.0254,
                    "id": "meterpersecondcube",
                    "isSI": true
                }, {
                    "symbol": "cm/sec&sup3",
                    "name": "centimeter/second³",
                    "conversionFactor": 2.54,
                    "id": "centimeterpersecondcube"
                }, {
                    "symbol": "mm/sec&sup3",
                    "name": "millimeter/second³",
                    "conversionFactor": 25.4,
                    "id": "millimeterpersecondcube",
                    "isMetric": true
                }, {
                    "symbol": "in/sec&sup3",
                    "name": "inches/second³",
                    "conversionFactor": 1,
                    "id": "inchespersecondcube",
                    "isImperial": true
                }, {
                    "symbol": "ft/sec&sup3",
                    "name": "feet/second³",
                    "conversionFactor": 0.0833333333333333,
                    "id": "feetpersecondcube"
                }]
            },
            "VOLUME": {
                "unit": [{
                    "symbol": "m&sup3",
                    "name": "meter³",
                    "conversionFactor": 0.000016387064,
                    "id": "metercube",
                    "isSI": true
                }, {
                    "symbol": "cm&sup3",
                    "name": "centimeter³",
                    "conversionFactor": 16.387064,
                    "id": "centimetercube"
                }, {
                    "symbol": "mm&sup3",
                    "name": "millimeter³",
                    "conversionFactor": 16387.064,
                    "id": "millimetercube"
                }, {
                    "symbol": "in&sup3",
                    "name": "inch³",
                    "conversionFactor": 1,
                    "id": "inchcube",
                    "isImperial": true
                }, {
                    "symbol": "ft&sup3",
                    "name": "feet³",
                    "conversionFactor": 0.000578704,
                    "id": "feetcube"
                }]
            },
            "AREA": {
                "unit": [{
                    "symbol": "m&sup2",
                    "name": "meter²",
                    "conversionFactor": 0.000645159999999949,
                    "id": "metersquare",
                    "isSI": true
                }, {
                    "symbol": "cm&sup2",
                    "name": "centimeter²",
                    "conversionFactor": 6.4516,
                    "id": "centimetersquare"
                }, {
                    "symbol": "mm&sup2",
                    "name": "millimeter²",
                    "conversionFactor": 645.16,
                    "id": "millimetersquare"
                }, {
                    "symbol": "in&sup2",
                    "name": "inch²",
                    "conversionFactor": 1,
                    "id": "inchsquare",
                    "isImperial": true
                }, {
                    "symbol": "ft&sup2",
                    "name": "feet²",
                    "conversionFactor": 0.00694444444444438,
                    "id": "feetsquare"
                }]
            },
            "ANGULARJERK": {
                "unit": [{
                    "symbol": "rad/sec&sup3",
                    "name": "radian/second³",
                    "conversionFactor": 1,
                    "id": "radianpersecondcube",
                    "isSI": true
                }, {
                    "symbol": "deg/sec&sup3",
                    "name": "degree/second³",
                    "conversionFactor": 57.2957795130823,
                    "id": "degreepersecondcube"
                }, {
                    "symbol": "rev/sec&sup3",
                    "name": "revolution/second³",
                    "conversionFactor": 0.159154943091895,
                    "id": "revolutionpersecondcube"
                }, {
                    "symbol": "rpm/sec&sup2",
                    "name": "revolution-per-minute/second²",
                    "conversionFactor": 9.54929658551372,
                    "id": "revolutionperminutepersecondsquare",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "MOMENT": {
                "unit": [{
                    "symbol": "N-m",
                    "name": "newton-meter",
                    "conversionFactor": 0.007061552,
                    "id": "newtonpermeter",
                    "isSI": true,
                    "isMetric": true
                }, {
                    "symbol": "oz-in",
                    "name": "ounce-inch",
                    "conversionFactor": 1,
                    "id": "ounceinch"
                }, {
                    "symbol": "lb-in",
                    "name": "pound-inch",
                    "conversionFactor": 0.0625,
                    "id": "poundinch",
                    "isImperial": true
                }, {
                    "symbol": "lb-ft",
                    "name": "pound-feet",
                    "conversionFactor": 0.00520833333333333,
                    "id": "poundfeet"
                }]
            },
            "BANDWIDTH": {
                "unit": [{
                    "symbol": "1/sec",
                    "name": "1/second",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "onepersecond",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "INTEGRAL": {
                "unit": [{
                    "symbol": "1/ms-s",
                    "name": "1/ms-s",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "onepermss",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "STIFFNESSROTARY": {
                "unit": [{
                    "symbol": "Nm/deg",
                    "name": "newton-meter/degree",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "newtonmeterperdegree",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "BACKLASH": {
                "unit": [{
                    "symbol": "arc min",
                    "name": "arc minute",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "arcminute",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "FREQUENCY": {
                "unit": [{
                    "symbol": "Hz",
                    "name": "hertz",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "hertz",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "PRESSURE": {
                "unit": [{
                    "symbol": "GPa",
                    "name": "giga-pascal",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "gigapascal",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "THERMALMASS": {
                "unit": [{
                    "symbol": "J/ºC",
                    "name": "joules/celsius",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "joulespercelsius"
                }]
            },
            "STIFFNESSLINEAR": {
                "unit": [{
                    "symbol": "N/mm",
                    "name": "newton/millimeter",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "newtonpermillimeter",
                    "isMetric": true,
                    "isImperial": true
                }]
            },
            "PERCENTAGE": {
                "unit": [{
                    "symbol": "%",
                    "name": "percentage",
                    "conversionFactor": 1,
                    "isSI": true,
                    "id": "percentage",
                    "isMetric": true,
                    "isImperial": true
                }]
            }
        }
}
; //Setup Namspace
window.COSMATT = window.COSMATT || {};

COSMATT.UNITCONVERTER = (function() {

  //loading unitData.json from some external url
  /*  $.ajax({
            dataType: "text",
            url: '../libs-frontend-unitcombobox/src/data/unitData.json',
            async: false,
            success: function(data) {
             
                unitData = $.parseJSON(data);
            },
            error: function(error) {
                console.error("Json is not loaded");
            }
        });
*/



  /*  convertedValue function return converted value based on provided inputs
   * unitType can be: Time or ANGULARACCELERATION or MASS etc  
   * value : input box current value
   * unitFrom : combo box current selected unit name
   * unitTo : combo box changed unit name
   */
  var convertedValue = function(unitType, value, unitFrom, unitTo) {
    try {
      var convertedValue = "";
      if(unitType === 'TEMPERATURE'){
        convertedValue = temperatureConversion (value, unitFrom, unitTo);
      }
      else{
        var unitFromConverionFactor = "";
        var unitToConverionFactor = "";
        unitNode = unitData.unitType[unitType].unit;
        for (var loop = 0; loop < unitNode.length; loop++) {
          if (unitNode[loop].id == unitFrom) {
            unitFromConverionFactor = (unitNode[loop].conversionFactor);
          }
          if (unitNode[loop].id == unitTo) {
            unitToConverionFactor = (unitNode[loop].conversionFactor);
          }
        }
        convertedValue = (unitToConverionFactor / unitFromConverionFactor) * value;
      }
      
      return (convertedValue);
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }

  };


 /*  Function to convert tempertature from celsius to fahrenheit and vise versa
   * value : input box current value
   * unitFrom : combo box current selected unit name
   * unitTo : combo box changed unit name
   */
  var temperatureConversion = function(value, unitFrom, unitTo){
      var convertedValue = '';
      switch (unitFrom) {
        case "celsius":            
          convertedValue = (value * 9 / 5 ) + 32;
        break;
        case "fahrenheit":
          convertedValue = (value - 32) * 5 / 9;
        break;
      }
      return convertedValue;
  };

  /*  units function return array of units.
   * input vaulue is string of unitType 
   * unitType can be: Time or ANGULARACCELERATION or MASS etc  
   */
  var units = function(unitType) {
    try {
      var units = [];
      var unitNode = [];
      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        units.push(unitNode[loop].symbol);
      }
      return units;
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }


  };
  var unitsAndIds = function(unitType) {
    try {
      var units = [];
      var unitNode = [];

      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        var unitsObj = {};
        unitsObj['name'] = unitNode[loop].symbol;
        unitsObj['id'] = unitNode[loop].id;
        units.push(unitsObj);
      }

      return units;
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }


  };
  /*  SIUnit function return unitType SI unit name
   * input vaulue is string of unitType 
   * Example :unitType = 'TIME' 
   * function will return 'sec'
   */
  var SIUnit = function(unitType) {
    try {
      var SIUnitObj = {};
      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        if (unitNode[loop].isSI != undefined && unitNode[loop].isSI == true) {
          SIUnitObj.name = unitNode[loop].symbol;
          SIUnitObj.id = unitNode[loop].id;
        }
      }
      return SIUnitObj;
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }

  };

  var SIValue = function(unitType, selectedUnit, value) {
    try {
      var SIUnitIndex;
      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        if (unitNode[loop].isSI != undefined && unitNode[loop].isSI == true) {
          SIUnitIndex = loop;
          break;
        }
      }
      if (SIUnitIndex === selectedUnit) {
        return value;
      }
      return (value * conversionRatio(unitType, selectedUnit, SIUnitIndex));
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }

  };
  /* conversionFactor function return value of conversion factor for each unit type
   * input vaulue is string of unitType and unitName
   * Example :unitType = 'TIME',  unitName = 'msec'
   * function will return '60000'
   */
  var conversionFactor = function(unitType, unitName) {
    try {
      var conversionFactor = '';
      unitNode = unitData.unitType[unitType].unit;

      for (var loop = 0; loop < unitNode.length; loop++) {
        if (unitNode[loop].id == unitName) {
          conversionFactor = unitNode[loop].conversionFactor;
        }


      }
      return conversionFactor;
    } catch (errorMessage) {

      console.log('Error : ' + errorMessage);

    }

  };

  /* conversionFactor function return value of conversion factor for each unit type
   * input vaulue is string of unitType and unitName
   * Example :unitType = 'TIME',  unitName = 'msec'
   * function will return '60000'
   */
  var conversionRatio = function(unitType, prevIndex, newIndex) {
    try {
      var prevConversionFactor = 1;
      var newConversionFactor = 1;
      unitNode = unitData.unitType[unitType].unit;

      for (var loop = 0; loop < unitNode.length; loop++) {
        if (loop == prevIndex) {
          prevConversionFactor = unitNode[loop].conversionFactor;
        }
        if (loop == newIndex) {
          newConversionFactor = unitNode[loop].conversionFactor;
        }
      }
      return newConversionFactor / prevConversionFactor;
    } catch (errorMessage) {
      console.log('Error : ' + errorMessage);
    }

  };

  /* conversionFactor function return value of conversion factor for each unit type
   * input vaulue is string of unitType and unitName
   * Example :unitType = 'TIME',  unitName = 'msec'
   * function will return '60000'
   */
  var conversionRatioById = function(unitType, unitFrom, UnitTo) {
    try {
      var prevConversionFactor = 1;
      var newConversionFactor = 1;
      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        if (unitFrom == "SI" && unitNode[loop].isSI) {
          prevConversionFactor = unitNode[loop].conversionFactor;
        } else if (unitNode[loop].id == unitFrom) {
          prevConversionFactor = unitNode[loop].conversionFactor;
        }

        if (UnitTo == "SI" && unitNode[loop].isSI) {
          newConversionFactor = unitNode[loop].conversionFactor;
        } else if (unitNode[loop].id == UnitTo) {
          newConversionFactor = unitNode[loop].conversionFactor;
        }
      }
      return newConversionFactor / prevConversionFactor;
    } catch (errorMessage) {
      console.log('Error : ' + errorMessage);
    }

  };

  var unitDetails = function(unitType, unit) {
    try {
      var unitNode = [];

      unitNode = unitData.unitType[unitType].unit;
      for (var loop = 0; loop < unitNode.length; loop++) {
        if (unitNode[loop].id == unit) {
          return (unitNode[loop]);
        }
      }
      return null;
    } catch (errorMessage) {
      console.log('Error : ' + errorMessage);
    }
  }


  /* PUBLIC METHODS */
  return {
    // Exposed functions
    getUnits: units,
    getunitsAndIds: unitsAndIds,
    getSIUnit: SIUnit,
    getSIValue: SIValue,
    getUnitConvertedValue: convertedValue,
    getConversionFactor: conversionFactor,
    getConversionRatio: conversionRatio,
    getConversionRatioById: conversionRatioById,
    getUnitDetails: unitDetails

  };

}());
(function ($) {

    // add the plugin to the jQuery.fn object
    $.fn.unitsComboBox = function (options) {
        // default values 
        var defaults = {
            "unitType": "",
            "unit": "",
            "roundOfNumber": "",
            "value": "",
            "show": "true",
            "enable": {
                "textbox": "true",
                "comboBox": "true"
            },
            "comboBoxWidthRatio": {
                "textBox": "60%",
                "comboBox": "40%"
            },
            "step": "0.1",
            "dataRule": "currency",
            "userEnteredValue":"",
            "userEnteredUnit":"",
            "numberFormatterOptions": {
            },
            callBackFn: function () { }
        }

        // current instance of the object
        var plugin = this;
        var timerId = 0;
        plugin.settings = {}
        var $element = $(this); // reference to the jQuery version of DOM element  
        // the plugin's final properties are the merged default and
        plugin.settings = $.extend({}, defaults, options);
        var numberFormatter = new Cosmatt.NumberFormatter(plugin.settings.numberFormatterOptions);

        // the "constructor" method that gets called when the object is created
        plugin.init = function () {

            // function is called to intialze dom element
            createComboBox(plugin.settings.unitType);

        }

        /** public function to update plugin contols based on inputs  **/
        plugin.update = function (options) {
            var newOptions = $.extend({}, plugin.settings, options);

            $element.find('.cosmatt-unitComboBox')[newOptions.show == 'true' ? 'show' : 'hide']();

            newOptions.enable.textbox == 'true' ? $element.find('.cosmatt-unitComboBox').find('input').removeAttr('disabled') :
                $element.find('.cosmatt-unitComboBox').find('input').attr('disabled', 'disabled');

            newOptions.enable.comboBox == 'true' ? $element.find('.cosmatt-unitComboBox').find('.btn-group').find('button').removeAttr('disabled') :
                $element.find('.cosmatt-unitComboBox').find('.btn-group').find('button').attr('disabled', 'disabled');

            $element.find('.cosmatt-unitComboBox').find('.unitTextBox')[newOptions.showComboBoxOnly == 'true' ? 'hide' : 'show']();

            $element.find('.cosmatt-unitComboBox').find('.unitComboBox')[newOptions.showTextBoxOnly == 'true' ? 'hide' : 'show']();
        };

        /** public function return SI value for provided unit type **/
        plugin.getSIValue = function () {

            var textboxValue = 0;
            var SIUnitObj = '';
            if (typeof COSMATT.UNITCONVERTER === 'object') {
                SIUnitObj = COSMATT.UNITCONVERTER.getSIUnit(plugin.settings.unitType);

                //textboxValue = $element.find(".amount_" + plugin.settings.unitType).val();
                var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, plugin.settings.value, plugin.settings.unit, SIUnitObj.id);

                return convertedVal;
            }
        };

        /** public function return value in selected unit type from dropdown **/
        plugin.getValueInSelectedUnit = function (siVal) {



            // var textboxValue = 0;
            var SIUnitObj = '';
            if (typeof COSMATT.UNITCONVERTER === 'object') {
                SIUnitObj = COSMATT.UNITCONVERTER.getSIUnit(plugin.settings.unitType);

                // textboxValue = $element.find(".amount_" + plugin.settings.unitType).val();
                var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, siVal, SIUnitObj.id, plugin.settings.unit);
                return convertedVal;
            }
        };

        /** public function return SI value for provided unit type **/
        plugin.getConversionFactor = function () {

            var textboxValue = 0;
            var conversionfactor = '';
            if (typeof COSMATT.UNITCONVERTER === 'object') {
                conversionfactor = COSMATT.UNITCONVERTER.getConversionFactor(plugin.settings.unitType, plugin.settings.unit);

            }
            return conversionfactor;
        };
        /** public function set DropBox Item **/
        plugin.setDropBoxItem = function (optionId) {

            $element.find('.dropdown-menu a').filter(function (ele, option) {
                $element.find('a.selected').removeClass('selected');
                return $(option).data('id') == optionId;
            }).addClass("selected");

            $element.find('button.boxSelectedVal').text($element.find('a.selected').text());


            var textboxValue = 0;
            textboxValue = plugin.settings.value;
            if (textboxValue === '') {
                plugin.setTextBoxValue(textboxValue);
                plugin.settings.unit = $element.find('a.selected').data('id');
                return;
            }

            if (plugin.settings.showComboBoxOnly == 'true') {
                var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, 1, plugin.settings.unit, $element.find('a.selected').data('id'));
            } else {
                var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, textboxValue, plugin.settings.unit, $element.find('a.selected').data('id'));
            }

            // conversionfactor = COSMATT.UNITCONVERTER.getConversionFactor(plugin.settings.unitType, $(this).val());

            plugin.settings.unit = $element.find('a.selected').data('id');
            plugin.settings.userEnteredUnit = plugin.settings.unit; 
            plugin.setTextBoxValue(convertedVal);
        }
        /** public function to set Value in SI unit **/
        plugin.setSIValue = function (value) {
            var SIUnit = COSMATT.UNITCONVERTER.getSIUnit(plugin.settings.unitType);
            var currentValue = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, value, SIUnit.id, plugin.settings.unit);

            plugin.setTextBoxValue(currentValue);
        }
        /** public function set TextboxValue **/
        plugin.setTextBoxValue = function (value) {

            var stringToNum;

            if (value === '') {
                stringToNum = value;
            } else {
                stringToNum = Number(value);
            }
            plugin.settings.value = value;

            /** Update the stored values if we update dynamically textbox value from x to y **/
            if(plugin.settings.userEnteredUnit === plugin.settings.unit){
                saveUserEnteredData();
            }
            

            plugin.formatTextBoxValue(value);
            // if (plugin.settings.roundOfNumber !== '' && stringToNum !== '') {
            //   // stringToNum = (stringToNum).toFixed(plugin.settings.roundOfNumber);
            //   // stringToNum = (stringToNum).toFixed(plugin.settings.roundOfNumber);
            //   var decimalPlaces = Math.pow(10, plugin.settings.roundOfNumber);
            //   stringToNum = Math.round(stringToNum * decimalPlaces) / decimalPlaces;
            // }

            //$element.find(".amount_" + plugin.settings.unitType).val(stringToNum);
            //$element.find(".amount_" + plugin.settings.unitType).attr('title', plugin.settings.value);
        };
        plugin.formatTextBoxValue = function (value) {
            if ($element.find(".unitTextBox input").is(":focus")) {
                console.log("input has focus, don't format")
                return;
            }
            if (numberFormatter) {
                value = numberFormatter.format(value, true);
            }
            $element.find(".amount_" + plugin.settings.unitType).val(value);
        };
        /* private method
         *  createComboBox functions is responsible to create dopdown,textbox and attache event handler 
         *  input value TIME or ANGULARACCELERATION or MASS etc 
         */
        var createComboBox = function (unitType) {

            var callbackData = {};
            try {
                if (typeof COSMATT.UNITCONVERTER === 'object' && unitType != '') {
                    var dropDownOptions = COSMATT.UNITCONVERTER.getunitsAndIds(unitType);
                    //var UNITSI = COSMATT.UNITCONVERTER.getSIUnit(unitType);

                    var $unitWrapper = $('<div class="cosmatt-unitComboBox"></div>');
                    $element.append($unitWrapper);


                    var $textboxContainer = $('<div class="unitTextBox"></div>');
                    $unitWrapper.append($textboxContainer);


                    var $spinControlWrap = $('<div class="input-group unitComboBoxGrp"></div>');
                    $textboxContainer.append($spinControlWrap);


                    if (plugin.settings.mode == 'spin') {

                        $spinControlWrap.addClass("spinner");

                        $spinControlWrap.attr('data-trigger', 'spinner');

                        var $inputBox = $('<input type="text" class="form-control text-left spin-control amount_' + plugin.settings.unitType + '" value="" data-rule="' + plugin.settings.dataRule + '"></div>');
                        $spinControlWrap.append($inputBox);

                        $inputBox.attr('data-step', plugin.settings.step);
                        var $inputGroup = $('<div class="input-group-addon"></div>');
                        $spinControlWrap.append($inputGroup);

                        var $spinUp = $('<a href="javascript:;" class="spin-up" data-spin="up"><i class="fa fa-caret-up"></i></a>');
                        $inputGroup.append($spinUp);

                        var $spinDown = $(' <a href="javascript:;" class="spin-down" data-spin="down"><i class="fa fa-caret-down"></i></a>');
                        $inputGroup.append($spinDown);

                    }
                    else {
                        $spinControlWrap.addClass("defaultTextBox");

                        var $inputBox = $('<input type="text" class="form-control text-left input-control amount_' + plugin.settings.unitType + '" value="" data-rule="' + plugin.settings.dataRule + '"></div>');
                        $spinControlWrap.append($inputBox);
                    }

                    plugin.setTextBoxValue(plugin.settings.value);

                    if (plugin.settings.max != undefined) {
                        $inputBox.attr('max', plugin.settings.max);
                    }
                    else {
                        $inputBox.attr('max', '9999999999');
                    }
                    if (plugin.settings.min != undefined) {
                        $inputBox.attr('min', plugin.settings.min);
                    }
                    else {
                        $inputBox.attr('min', '0');
                    }

                    /***********************Drop Box*************************/
                    for (var loop1 = 0; loop1 < dropDownOptions.length; loop1++) {
                        if (plugin.settings.unit == dropDownOptions[loop1].id) {
                            var selectedUnit = dropDownOptions[loop1].name;
                            var selectedUnitId = dropDownOptions[loop1].id;
                        }
                    }

                    var $unitDropDown = $('<div class="unitComboBox"></div>');
                    $unitWrapper.append($unitDropDown);

                    var $buttonGrp = $('<div class="btn-group"></div>');
                    $unitDropDown.append($buttonGrp);

                    var $btnSecondary = $('<button type="button" data-toggle="dropdown" class="btn btn-default boxSelectedVal" id="comboBox' + plugin.settings.unitType + '">' + selectedUnit + '</button>');
                    $buttonGrp.append($btnSecondary);

                    var $toggleButton = $('<button type="button" data-toggle="dropdown" class="btn btn-default dropdown-toggle"><span class="caret"></span></button>');
                    $buttonGrp.append($toggleButton);

                    var $menuItems = $('<ul class="dropdown-menu"></ul>');
                    $buttonGrp.append($menuItems);

                    for (var loop = 0; loop < dropDownOptions.length; loop++) {
                        var $list = $('<li></li>');
                        $menuItems.append($list);
                        var option = $('<a class="dropdown-item">' + dropDownOptions[loop].name + '</a>');
                        option.data('id', dropDownOptions[loop].id);
                        $list.append(option);
                    }

                    $textboxContainer.css('width', plugin.settings.comboBoxWidthRatio.textBox);
                    $unitDropDown.css('width', plugin.settings.comboBoxWidthRatio.comboBox);

                    $element.find('.dropdown-menu a').filter(function (ele, option) {
                        return $(option).data('id') == plugin.settings.unit;
                    }).addClass("selected");


                    plugin.settings.unit = selectedUnitId;
                    initializeComboBoxControl();
                    initializeTextBoxControl();
                    plugin.update({});
                    plugin.settings.SIValue = plugin.getSIValue({});
                    if (typeof plugin.settings.callBackFn == 'function') { // make sure the callback is a function    

                        callbackData.unit = plugin.settings.unit;
                        callbackData.SIValue = plugin.settings.SIValue;
                        plugin.settings.callBackFn.call(callbackData); // brings the scope to the callback
                    }
                }
            } catch (errorMessage) {
                console.log('Error : ' + errorMessage);
            }
        };


        /** Combo box event handler **/

        var initializeComboBoxControl = function () {
            var textboxValue = 0;
            var callbackData = {};

            $element.find('.dropdown-menu a').bind("mousedown", function (event) {

                textboxValue = plugin.settings.value;

                if (textboxValue === '') {
                    plugin.setTextBoxValue(textboxValue);
                    plugin.settings.unit = $(this).data('id');
                    return;
                }

                if (plugin.settings.showComboBoxOnly == 'true') {
                    var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, 1, plugin.settings.unit, $(this).data('id'));
                }
                else {                    
                    /**Added a check if stored unit is equal to current selected unit to fixed the issue COSMATT-1479 **/                   
                    if(plugin.settings.userEnteredUnit === $(this).data('id')){
                      plugin.setTextBoxValue(plugin.settings.userEnteredValue);
                    }
                    else{
                      var convertedVal = COSMATT.UNITCONVERTER.getUnitConvertedValue(plugin.settings.unitType, textboxValue, plugin.settings.unit, $(this).data('id'));
                    }  
                    
                }

                plugin.settings.unit = $(this).data('id');

                $element.find('button.boxSelectedVal').text($(this).text());
                if (convertedVal != undefined) {
                    plugin.setTextBoxValue(convertedVal);
                }


                if (typeof plugin.settings.callBackFn == 'function') { // make sure the callback is a function    


                    callbackData.unit = plugin.settings.unit;
                    callbackData.value = plugin.settings.value;
                    callbackData.SIValue = plugin.getSIValue({});
                    callbackData.type = "dropdown";
                    plugin.settings.callBackFn.call(callbackData); // brings the scope to the callback
                }
            });

        }

        var saveUserEnteredData = function(){
            
            plugin.settings.userEnteredValue = plugin.settings.value;
            plugin.settings.userEnteredUnit = plugin.settings.unit; 
        }

        /** Text box event handler **/

        var initializeTextBoxControl = function () {

            /** Stored the textbox value and selected unit when unitcombo box is initialized **/
            saveUserEnteredData();

            $element.find(".unitTextBox input").on('focus', function () {

                $(this).val(plugin.settings.value)
            });
            $element.find(".unitTextBox input").on('blur', function () {

                plugin.setTextBoxValue(plugin.settings.value);
            });
            $element.find(".unitTextBox input.input-control").on('input', function () {

                var self = this;
                plugin.settings.value = $(self).val();
                /** Update the stored values if user trying to change tetxbox value from x to y **/
                saveUserEnteredData();

                var $pluginObj = $element
                var callbackData = {};

                if (timerId > 0) {
                    clearTimeout(timerId);
                }

                timerId = setTimeout((function () {

                    if (typeof plugin.settings.callBackFn == 'function') { // make sure the callback is a function    

                        callbackData.value = plugin.settings.value;
                        callbackData.unit = plugin.settings.unit;
                        callbackData.type = "textbox";
                        callbackData.SIValue = plugin.getSIValue();

                        plugin.settings.callBackFn.call(callbackData); // brings the scope to the callback
                    }

                }), 800);


            });
            if (plugin.settings.mode == 'spin') {
                $element.find(".unitComboBoxGrp").spinner('changing', function (e, newVal, oldVal) {

                    var self = this;
                    plugin.settings.value = newVal;                  
                    /** Update the stored values if user trying to change spin control value from x to y **/
                    saveUserEnteredData();                 
                    var $pluginObj = $element
                    var callbackData = {};

                    if (typeof plugin.settings.callBackFn == 'function') { // make sure the callback is a function
                        callbackData.value = plugin.settings.value;
                        callbackData.unit = plugin.settings.unit;
                        callbackData.type = "textbox";
                        callbackData.SIValue = plugin.getSIValue();

                        plugin.settings.callBackFn.call(callbackData); // brings the scope to the callback
                    }
                });

            }


        };


        // call the "constructor" method
        plugin.init();
        $(this).data('unitsComboBox', plugin);
    }

})(jQuery);
/*!
 * jquery.spinner v0.2.1 (https://vsn4ik.github.io/jquery.spinner/)
 * Copyright 2013-2017 xixilive
 * Licensed under the MIT license
 */
'use strict';

(function(factory) {
  if (typeof define === 'function' && define.amd) {
    // AMD. Register as an anonymous module
    define(['jquery'], factory);
  }
  else if (typeof exports === 'object') {
    // Node/CommonJS
    module.exports = factory(require('jquery'));
  }
  else {
    // Browser globals
    factory(jQuery);
  }
})(function($) {
  var spinningTimer;
  var Spinner;
  var Spinning = function($element, options) {
    this.$el = $element;
    this.options = $.extend({}, Spinning.rules.defaults, Spinning.rules[options.rule] || {}, options);
    this.min = Number(this.options.min) || 0;
    this.max = Number(this.options.max) || 0;

    this.$el.on({
      'focus.spinner': $.proxy(function(e) {
        e.preventDefault();
        $(document).trigger('mouseup.spinner');
        this.oldValue = this.value();
      }, this),
      'change.spinner': $.proxy(function(e) {
        e.preventDefault();
        this.value(this.$el.val());
      }, this),
      'keydown.spinner': $.proxy(function(e) {
        var dir = {
          38: 'up',
          40: 'down'
        }[e.which];

        if (dir) {
          e.preventDefault();
          this.spin(dir);
        }
      }, this)
    });

    //init input value
    this.oldValue = this.value();
    this.value(this.$el.val());
    return this;
  };

  Spinning.rules = {
    defaults: { min: null, max: null, step: 1, precision: 0 },
    currency: { min: 0.00, max: null, step: 0.01, precision: 2 },
    quantity: { min: 1, max: 999, step: 1, precision: 0 },
    percent:  { min: 1, max: 100, step: 1, precision: 0 },
    month:    { min: 1, max: 12, step: 1, precision: 0 },
    day:      { min: 1, max: 31, step: 1, precision: 0 },
    hour:     { min: 0, max: 23, step: 1, precision: 0 },
    minute:   { min: 1, max: 59, step: 1, precision: 0 },
    second:   { min: 1, max: 59, step: 1, precision: 0 }
  };

  Spinning.prototype = {
    spin: function(dir) {
      if (this.$el.prop('disabled')) {
        return;
      }

      this.oldValue = this.value();
      var step = $.isFunction(this.options.step) ? this.options.step.call(this, dir) : this.options.step;
      var multipler = dir === 'up' ? 1 : -1;

      this.value(this.oldValue + Number(step) * multipler);
    },

    value: function(v) {
      if (v === null || v === undefined) {
        return this.numeric(this.$el.val());
      }
      v = this.numeric(v);

      var valid = this.validate(v);
      if (valid !== 0) {
        v = (valid === -1) ? this.min : this.max;
      }
      //this.$el.val(v.toFixed(this.options.precision));
      this.$el.val(v);

      if (this.oldValue !== this.value()) {
        // changing.spinner
        this.$el.trigger('changing.spinner', [this.value(), this.oldValue]);

        // lazy changed.spinner
        clearTimeout(spinningTimer);
        spinningTimer = setTimeout($.proxy(function() {
          this.$el.trigger('changed.spinner', [this.value(), this.oldValue]);
        }, this), Spinner.delay);
      }
    },

    numeric: function(v) {
      v = this.options.precision > 0 ? parseFloat(v, 10) : parseInt(v, 10);

      // If the variable is a number
      if (isFinite(v)) {
        return v;
      }

      return v || this.options.min || 0;
    },

    validate: function(val) {
      if (this.options.min !== null && val < this.min) {
        return -1;
      }

      if (this.options.max !== null && val > this.max) {
        return 1;
      }

      return 0;
    }
  };

  Spinner = function(element, options) {
    this.$el = $(element);
    this.$spinning = this.$el.find('[data-spin="spinner"]');

    if (this.$spinning.length === 0) {
      this.$spinning = this.$el.find(':input[type="text"]');
    }

    options = $.extend({}, options, this.$spinning.data());

    this.spinning = new Spinning(this.$spinning, options);

    this.$el
      .on('click.spinner', '[data-spin="up"], [data-spin="down"]', $.proxy(this, 'spin'))
      .on('mousedown.spinner', '[data-spin="up"], [data-spin="down"]', $.proxy(this, 'spin'));

    $(document).on('mouseup.spinner', $.proxy(function() {
      clearTimeout(this.spinTimeout);
      clearInterval(this.spinInterval);
    }, this));

    if (options.delay) {
      this.delay(options.delay);
    }

    if (options.changed) {
      this.changed(options.changed);
    }

    if (options.changing) {
      this.changing(options.changing);
    }
  };

  Spinner.delay = 500;

  Spinner.prototype = {
    constructor: Spinner,

    spin: function(e) {
      var dir = $(e.currentTarget).data('spin');

      switch (e.type) {
        case 'click':
          e.preventDefault();
          this.spinning.spin(dir);
          break;
        case 'mousedown':
          if (e.which === 1) {
            this.spinTimeout = setTimeout($.proxy(this, 'beginSpin', dir), 300);
          }
          break;
      }
    },

    delay: function(ms) {
      var delay = Number(ms);

      if (delay >= 0) {
        this.constructor.delay = delay + 100;
      }
    },

    value: function() {
      return this.spinning.value();
    },

    changed: function(fn) {
      this.bindHandler('changed.spinner', fn);
    },

    changing: function(fn) {
      this.bindHandler('changing.spinner', fn);
    },

    bindHandler: function(t, fn) {
      if ($.isFunction(fn)) {
        this.$spinning.on(t, fn);
      }
      else {
        this.$spinning.off(t);
      }
    },

    beginSpin: function(dir) {
      this.spinInterval = setInterval($.proxy(this.spinning, 'spin', dir), 100);
    }
  };

  var old = $.fn.spinner;

  $.fn.spinner = function(options, value) {
    return this.each(function() {
      var data = $.data(this, 'spinner');

      if (!data) {
        data = new Spinner(this, options);

        $.data(this, 'spinner', data);
      }
      if (options === 'delay' || options === 'changed' || options === 'changing') {
        data[options](value);
      }
      else if (options === 'step' && value) {
        data.spinning.step = value;
      }
      else if (options === 'spin' && value) {
        data.spinning.spin(value);
      }
    });
  };

  $.fn.spinner.Constructor = Spinner;
  $.fn.spinner.noConflict = function() {
    $.fn.spinner = old;
    return this;
  };

  $(function() {
    $('[data-trigger="spinner"]').spinner();
  });

  return $.fn.spinner;
});
